!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c=navigator.userAgent,F=/iphone/i.test(c),G=/chrome/i.test(c),C=/android/i.test(c);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"};a.fn.extend({caret:function(a,b){var c;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?
this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1E5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(c,m){var p,x,g,v,q,A,k,y;return!c&&
0<this.length?(p=a(this[0]),(p=p.data(a.mask.dataName))?p():void 0):(m=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},m),x=a.mask.definitions,g=[],v=k=c.length,q=null,a.each(c.split(""),function(a,b){"?"==b?(k--,v=a):x[b]?(g.push(new RegExp(x[b])),null===q&&(q=g.length-1),v>a&&(A=g.length-1)):g.push(null)}),this.trigger("unmask").each(function(){function p(){if(m.completed){for(var a=q;A>=a;a++)if(g[a]&&h[a]===r(a))return;m.completed.call(d)}}function r(a){return m.placeholder.charAt(a<
m.placeholder.length?a:0)}function t(a){for(;++a<k&&!g[a];);return a}function D(a,f){var b,e;if(!(0>a)){b=a;for(e=t(f);k>b;b++)if(g[b]){if(!(k>e&&g[b].test(h[e])))break;h[b]=h[e];h[e]=r(e);e=t(e)}w();d.caret(Math.max(q,a))}}function H(a){var f,b,d;f=a;for(a=r(a);k>f;f++)if(g[f]){if(b=t(f),d=h[f],h[f]=a,!(k>b&&g[b].test(d)))break;a=d}}function I(){var a=d.val(),f=d.caret();if(y&&y.length&&y.length>a.length){for(u(!0);0<f.begin&&!g[f.begin-1];)f.begin--;if(0===f.begin)for(;f.begin<q&&!g[f.begin];)f.begin++}else for(u(!0);f.begin<
k&&!g[f.begin];)f.begin++;d.caret(f.begin,f.begin);p()}function E(){u();d.val()!=B&&d.change()}function z(a,f){var b;for(b=a;f>b&&k>b;b++)g[b]&&(h[b]=r(b))}function w(){d.val(h.join(""))}function u(a){var b,c,e,n=d.val(),l=-1;for(e=b=0;k>b;b++)if(g[b]){for(h[b]=r(b);e++<n.length;)if(c=n.charAt(e-1),g[b].test(c)){h[b]=c;l=b;break}if(e>n.length){z(b+1,k);break}}else h[b]===n.charAt(e)&&e++,v>b&&(l=b);return a?w():v>l+1?m.autoclear||h.join("")===J?(d.val()&&d.val(""),z(0,k)):w():(w(),d.val(d.val().substring(0,
l+1))),v?b:q}var d=a(this),h=a.map(c.split(""),function(a,b){return"?"!=a?x[a]?r(b):a:void 0}),J=h.join(""),B=d.val();d.data(a.mask.dataName,function(){return a.map(h,function(a,b){return g[b]&&a!=r(b)?a:null}).join("")});d.one("unmask",function(){d.off(".mask").removeData(a.mask.dataName)}).on("focus.mask",function(){if(!d.prop("readonly")){clearTimeout(b);var a;B=d.val();a=u();b=setTimeout(function(){d.get(0)===document.activeElement&&(w(),a==c.replace("?","").length?d.caret(0,a):d.caret(a))},10)}}).on("blur.mask",
E).on("keydown.mask",function(a){if(!d.prop("readonly")){var b,c,e=a.which||a.keyCode;y=d.val();if(8===e||46===e||F&&127===e){b=d.caret();c=b.begin;b=b.end;if(0===b-c){if(46!==e)for(;0<=--c&&!g[c];);else c=b=t(c-1);b=46===e?t(b):b}z(c,b);D(c,b-1);a.preventDefault()}else 13===e?E.call(this,a):27===e&&(d.val(B),d.caret(0,u()),a.preventDefault())}}).on("keypress.mask",function(b){if(!d.prop("readonly")){var c,m,e,n=b.which||b.keyCode,l=d.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>n)&&n&&13!==n){if(0!==
l.end-l.begin&&(z(l.begin,l.end),D(l.begin,l.end-1)),c=t(l.begin-1),k>c&&(m=String.fromCharCode(n),g[c].test(m)))(H(c),h[c]=m,w(),e=t(c),C)?setTimeout(function(){a.proxy(a.fn.caret,d,e)()},0):d.caret(e),l.begin<=A&&p();b.preventDefault()}}}).on("input.mask paste.mask",function(){d.prop("readonly")||setTimeout(function(){var a=u(!0);d.caret(a);p()},0)});G&&C&&d.off("input.mask").on("input.mask",I);u()}))}})});$("ulQ.sf-menu").superfish({delay:500,speed:"250",speedOut:"400"});
$(".main-navigation nav > ul > li").on("mouseenter mouseleave",function(a){var b=0<$(this).children("ul").length;if("mouseleave"==a.type||"mouseout"==a.type)b=!1;$(".sf-background").toggle(b)});$(".mobile-menu").on("click",function(a){$(".mobile-navigation").toggleClass("showed")});var mobLevel=0;
$(".mobile-navigation").on("click","a",function(a){var b=$(this).siblings("ul");b.length&&(mobLevel++,$(this).closest("nav").children("ul").css("transform","translateX(-"+100*mobLevel+"%)"),b.show(),0<mobLevel&&$(".back-button").css("left",100*mobLevel+50+"%"),a.preventDefault())});
$(".back-button").on("click",function(){mobLevel--;for(var a=".mobile-navigation nav ul ul",b=0;b<mobLevel;b++)a+=" ul";$(a).hide();$(".mobile-navigation nav > ul").css("transform","translateX(-"+100*mobLevel+"%)");0<mobLevel&&$(".back-button").css("left",100*mobLevel+50+"%")});$('input[name="phone"]').mask("9 (999) 999-99-9?9");$(".block-conditions input").on("focus blur",function(a){$(this).closest("section").find(".cond-background").css("transform","focus"==a.type?"translateX(0px)":"")});
$(document).on("click",".send",function(a){a.preventDefault();""!=$(this).closest("form").find('input[name="phone"]').val()&&(openPopup($(".popup-thank-you")),$(".popup-form .popup-close").click(),setTimeout(function(){$(".popup-thank-you .popup-close").click()},3500))});$(document).on("click",".open-popup",function(a){a.preventDefault();openPopup($(".popup-form"))});
function openPopup(a){a.css({transition:"opacity .0s",opacity:0}).show();var b=a.find(".popup-content").css({transition:".0s",transform:"translateY(40px)"});setTimeout(function(){a.css({transition:"opacity 1s .0s",opacity:1});b.css({transition:"1s",transform:""})},10);$(window).on("mousewheel",function(a){a.preventDefault()});a.find(".popup-background, .popup-close").one("click",function(){$(window).off("mousewheel");a.css({transition:"opacity .5s",opacity:0});setTimeout(function(){a.hide()},530)})}
var clouds=[{elem:$(".layer--cloud0"),duration:8E4,width:761},{elem:$(".layer--cloud1"),duration:13E4,width:857},{elem:$(".layer--cloud2"),duration:21E4,width:704},{elem:$(".layer--cloud3"),duration:166E3,width:882}];
function updateBackground(){var a=+new Date,b;b=a%45E4/45E4*4475;$(".layer--moscow").css("transform","translateX("+-b+"px)");for(var c=0;c<clouds.length;c++)b=(a+14E3*c)%clouds[c].duration/clouds[c].duration,b=1-b,clouds[c].elem.css("transform","translateX("+((innerWidth+2*clouds[c].width)*b-clouds[c].width)+"px)");setTimeout(updateBackground,1E3/45)}$(".layer--moscow").length&&updateBackground();var $navigation=$(".main-navigation"),$activeSq=$navigation.find(".active-elem"),$navLinks=$navigation.find("ul:first > li");
function updateSquarePos(a){var b=$navLinks.filter(".active");a&&(b=$(a));0==b.length&&(b=$navLinks.first());a=b.position().left+b.width()/2;$activeSq.css("transform","translateX("+a+"px)")}setTimeout(function(){updateSquarePos()},150);setTimeout(function(){$activeSq.addClass("animated")},250);$(window).load(function(){updateSquarePos()});$navLinks.on("mouseenter",function(){updateSquarePos(this)}).on("mouseleave",function(){updateSquarePos()});
function getRandomString(){return(+new Date).toString(36).substr(2)}function getFullOffsetTop(a,b){b=b||0;return a!=document.body&&a&&a.offsetParent?getFullOffsetTop(a.offsetParent,b+a.offsetTop):b}$.fn.getOffsetTop=function(){return getFullOffsetTop(this[0])};