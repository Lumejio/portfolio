function bezierEasing(a){var b="bez_"+jQuery.makeArray(arguments).join("_").replace(/\./g,"p");if("function"!=typeof jQuery.easing[b]){var c=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){for(var b,c=a,d=0;++d<14&&(b=f(c,0)-a,!(Math.abs(b)<.001));)c-=b/g(c);return c};return function(a){return f(h(a),1)}};jQuery.easing[b]=function(b,d,e,f,g){return f*c([a[0],a[1]],[a[2],a[3]])(d/g)+e}}return jQuery.easing[b].bind(null,null)}function stackBlurImage(a,b,c,d){var e=a,f=e.naturalWidth,g=e.naturalHeight,h=b;h.style.width=f+"px",h.style.height=g+"px",h.width=f,h.height=g;var i=h.getContext("2d");i.clearRect(0,0,f,g),i.drawImage(e,0,0),isNaN(c)||1>c||(d?stackBlurCanvasRGBA(b,0,0,f,g,c):stackBlurCanvasRGB(b,0,0,f,g,c))}function stackBlurCanvasRGBA(a,b,c,d,e,f){if(!(isNaN(f)||1>f)){f|=0;var g,h=a,i=h.getContext("2d");try{try{g=i.getImageData(b,c,d,e)}catch(a){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),g=i.getImageData(b,c,d,e)}catch(a){return}}}catch(a){return}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=g.data,I=f+f+1,J=d-1,K=e-1,L=f+1,M=L*(L+1)/2,N=new BlurStack,O=N;for(l=1;I>l;l++)if(O=O.next=new BlurStack,l==L)var P=O;O.next=N;var Q=null,R=null;p=o=0;var S=mul_table[f],T=shg_table[f];for(k=0;e>k;k++){for(y=z=A=B=q=r=s=t=0,u=L*(C=H[o]),v=L*(D=H[o+1]),w=L*(E=H[o+2]),x=L*(F=H[o+3]),q+=M*C,r+=M*D,s+=M*E,t+=M*F,O=N,l=0;L>l;l++)O.r=C,O.g=D,O.b=E,O.a=F,O=O.next;for(l=1;L>l;l++)m=o+((l>J?J:l)<<2),q+=(O.r=C=H[m])*(G=L-l),r+=(O.g=D=H[m+1])*G,s+=(O.b=E=H[m+2])*G,t+=(O.a=F=H[m+3])*G,y+=C,z+=D,A+=E,B+=F,O=O.next;for(Q=N,R=P,j=0;d>j;j++)H[o+3]=F=t*S>>T,0!=F?(F=255/F,H[o]=(q*S>>T)*F,H[o+1]=(r*S>>T)*F,H[o+2]=(s*S>>T)*F):H[o]=H[o+1]=H[o+2]=0,q-=u,r-=v,s-=w,t-=x,u-=Q.r,v-=Q.g,w-=Q.b,x-=Q.a,m=p+((m=j+f+1)<J?m:J)<<2,y+=Q.r=H[m],z+=Q.g=H[m+1],A+=Q.b=H[m+2],B+=Q.a=H[m+3],q+=y,r+=z,s+=A,t+=B,Q=Q.next,u+=C=R.r,v+=D=R.g,w+=E=R.b,x+=F=R.a,y-=C,z-=D,A-=E,B-=F,R=R.next,o+=4;p+=d}for(j=0;d>j;j++){for(z=A=B=y=r=s=t=q=0,o=j<<2,u=L*(C=H[o]),v=L*(D=H[o+1]),w=L*(E=H[o+2]),x=L*(F=H[o+3]),q+=M*C,r+=M*D,s+=M*E,t+=M*F,O=N,l=0;L>l;l++)O.r=C,O.g=D,O.b=E,O.a=F,O=O.next;for(n=d,l=1;f>=l;l++)o=n+j<<2,q+=(O.r=C=H[o])*(G=L-l),r+=(O.g=D=H[o+1])*G,s+=(O.b=E=H[o+2])*G,t+=(O.a=F=H[o+3])*G,y+=C,z+=D,A+=E,B+=F,O=O.next,K>l&&(n+=d);for(o=j,Q=N,R=P,k=0;e>k;k++)m=o<<2,H[m+3]=F=t*S>>T,F>0?(F=255/F,H[m]=(q*S>>T)*F,H[m+1]=(r*S>>T)*F,H[m+2]=(s*S>>T)*F):H[m]=H[m+1]=H[m+2]=0,q-=u,r-=v,s-=w,t-=x,u-=Q.r,v-=Q.g,w-=Q.b,x-=Q.a,m=j+((m=k+L)<K?m:K)*d<<2,q+=y+=Q.r=H[m],r+=z+=Q.g=H[m+1],s+=A+=Q.b=H[m+2],t+=B+=Q.a=H[m+3],Q=Q.next,u+=C=R.r,v+=D=R.g,w+=E=R.b,x+=F=R.a,y-=C,z-=D,A-=E,B-=F,R=R.next,o+=d}i.putImageData(g,b,c)}}function stackBlurCanvasRGB(a,b,c,d,e,f){if(!(isNaN(f)||1>f)){f|=0;var g,h=a,i=h.getContext("2d");try{try{g=i.getImageData(b,c,d,e)}catch(a){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),g=i.getImageData(b,c,d,e)}catch(a){return}}}catch(a){return}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=g.data,E=f+f+1,F=d-1,G=e-1,H=f+1,I=H*(H+1)/2,J=new BlurStack,K=J;for(l=1;E>l;l++)if(K=K.next=new BlurStack,l==H)var L=K;K.next=J;var M=null,N=null;p=o=0;var O=mul_table[f],P=shg_table[f];for(k=0;e>k;k++){for(w=x=y=q=r=s=0,t=H*(z=D[o]),u=H*(A=D[o+1]),v=H*(B=D[o+2]),q+=I*z,r+=I*A,s+=I*B,K=J,l=0;H>l;l++)K.r=z,K.g=A,K.b=B,K=K.next;for(l=1;H>l;l++)m=o+((l>F?F:l)<<2),q+=(K.r=z=D[m])*(C=H-l),r+=(K.g=A=D[m+1])*C,s+=(K.b=B=D[m+2])*C,w+=z,x+=A,y+=B,K=K.next;for(M=J,N=L,j=0;d>j;j++)D[o]=q*O>>P,D[o+1]=r*O>>P,D[o+2]=s*O>>P,q-=t,r-=u,s-=v,t-=M.r,u-=M.g,v-=M.b,m=p+((m=j+f+1)<F?m:F)<<2,w+=M.r=D[m],x+=M.g=D[m+1],y+=M.b=D[m+2],q+=w,r+=x,s+=y,M=M.next,t+=z=N.r,u+=A=N.g,v+=B=N.b,w-=z,x-=A,y-=B,N=N.next,o+=4;p+=d}for(j=0;d>j;j++){for(x=y=w=r=s=q=0,o=j<<2,t=H*(z=D[o]),u=H*(A=D[o+1]),v=H*(B=D[o+2]),q+=I*z,r+=I*A,s+=I*B,K=J,l=0;H>l;l++)K.r=z,K.g=A,K.b=B,K=K.next;for(n=d,l=1;f>=l;l++)o=n+j<<2,q+=(K.r=z=D[o])*(C=H-l),r+=(K.g=A=D[o+1])*C,s+=(K.b=B=D[o+2])*C,w+=z,x+=A,y+=B,K=K.next,G>l&&(n+=d);for(o=j,M=J,N=L,k=0;e>k;k++)m=o<<2,D[m]=q*O>>P,D[m+1]=r*O>>P,D[m+2]=s*O>>P,q-=t,r-=u,s-=v,t-=M.r,u-=M.g,v-=M.b,m=j+((m=k+H)<G?m:G)*d<<2,q+=w+=M.r=D[m],r+=x+=M.g=D[m+1],s+=y+=M.b=D[m+2],M=M.next,t+=z=N.r,u+=A=N.g,v+=B=N.b,w-=z,x-=A,y-=B,N=N.next,o+=d}i.putImageData(g,b,c)}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function runApart(a){return setTimeout(a,0)}function getTime(){return window.performance?window.performance.webkitNow?window.performance.webkitNow():window.performance.now?window.performance.now():(new Date).getTime():Date.now?Date.now():(new Date).getTime()}function getRandomSymbols(a){return Math.random().toString(36).substr(2,a)}function isExternal(a){var b=a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof b[1]&&b[1].length>0&&b[1].toLowerCase()!==location.protocol?!0:"string"==typeof b[2]&&b[2].length>0&&b[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host?!0:!1}function slowIteration(a,b,c){for(var d=0,e=1;a>0;)a-=b,d+=Math.min(b+a,b)*e,e*=c;return d}function FakeImage(a){var b=new Image;return b.fakeSrc=a,b}function getOffsetTop(a,b){return b=b||0,a!=document.body&&a&&a.offsetParent?getOffsetTop(a.offsetParent,b+a.offsetTop):b}function addRules(a,b){var c=stylesheet.saved++;if(b)return stylesheet.sheet.insertRule(a+" {"+b+"}",c);for(var d in a)stylesheet.sheet.insertRule(d+" {"+a[d]+"}",c)}function prefixMethod(a,b,c){for(var d,e,f=["webkit","moz","ms","o",""],g=-1;++g<f.length&&!a[d];)if(d=b,""==f[g]&&(d=d.substr(0,1).toLowerCase()+d.substr(1)),d=f[g]+d,e=typeof a[d],"undefined"!=e)return f=[f[g]],c?a[d]:"function"==e?a[d]():d}function singleAnimation(a){a=$.extend({position:1,duration:700,easing:"ease",step:function(){},complete:function(){}},a);var b=new MoveAnimation({pos:0});b.animate(a.position,a.duration,{dontRound:!0,easing:a.easing,step:a.step,complete:a.complete})}function ease(a,b){return a=Math.min(1,Math.max(a,0)),MoveAnimation.easing[b||"ease"](a,0,1,1)}function handleContext(a,b,c,d,e,f,g){return this[a](b,c,d,e,f,g),this}function createCanvas(a,b,c){var d=document.createElement("canvas");return d.setDimensions(a||1,b||1,!1,c),d.context=d.getContext("2d"),d}function VideoPlayer(a){function b(){function a(a){return Math.round(100*a)}f.spreaded&&c();var b=j.width()<600;j.toggleClass("small-container",b);var d=j.width()/j.height();m.css("visibility",a(d)===a(f.aspectRatio)?"hidden":"")}function c(){var a=1;if(f.spreaded){var b=j.width()/j.height();a=b<f.aspectRatio?f.aspectRatio/b:1/f.aspectRatio/(1/b)}var c="scale("+a+")";"vimeo"==i&&(c+=" translateY(-25%)"),"vimeo"!=i&&$(g).css("transform",c)}function d(){f.onload&&f.onload(),$(j).trigger("ready").data("videoplayer",f)}function e(a,b){j.trigger(a,b)}var f=this;this.onload=a.onload;var g,h,i=this.type=a.type,j=a.container;if("local"==i)g=h=this.html5video=document.createElement("video"),g.preload="metadata",g.src=g.savedSrc=getMediaSource(a.source),$(g).on("play",e.bind(null,"playing")),$(g).on("pause",e.bind(null,"paused")),$(g).on("ended",e.bind(null,"ended")),$(g).one("loadeddata",function(){f.aspectRatio=h.videoWidth/h.videoHeight,h.savedDuration=h.duration,d()}),g.load(),$(j).on("progressCheck",function(){var a=h.currentTime,b=h.duration;e("progress",[{seconds:a,duration:b,percent:a/b}])});else if("youtube"==i){var k=a.source.youtube,l=document.createElement("div");l.id=getRandomSymbols(2)+k,j.append(l),onYoutubeReady(function(){h=new YT.Player(l.id,{videoId:k,playerVars:YOUTUBE_VARS,loop:!!a.loop,events:{onReady:function(a){g=h.getIframe(),h.savedDuration=h.getDuration(),d()},onStateChange:function(a){a.data==YT.PlayerState.BUFFERING&&e("buffering"),a.data==YT.PlayerState.PLAYING&&e("playing"),a.data==YT.PlayerState.ENDED&&e("ended"),a.data==YT.PlayerState.PAUSED&&e("paused")}}})}),$(j).on("progressCheck",function(){var a=h.getCurrentTime(),b=h.savedDuration;e("progress",[{seconds:a,duration:b,percent:a/b}])})}else if("vimeo"==i){var k=a.source.vimeo;g=document.createElement("iframe"),g.id=k,g.src="http://player.vimeo.com/video/"+k+"?portrait=0&color=000000&title=0&byline=0&api=1&player_id="+k,function a(){return void 0===$f?setTimeout(a,16):(h=$f(g),void h.addEvent("ready",function(){h.addEvent("play",e.bind(null,"playing")),h.addEvent("pause",e.bind(null,"paused")),h.addEvent("finish",e.bind(null,"ended")),h.addEvent("playProgress",function(a){e("progress",[a])}),h.api("getDuration",function(a){h.savedDuration=a,d()})}))}()}this.play=function(){return h?"vimeo"==i?h.api("play"):(h.getAttribute&&""===h.getAttribute("src")&&(h.src=h.savedSrc),h["local"==i?"play":"playVideo"](),"youtube"==i&&$.browser.mobile&&setTimeout(function(){h.playVideo()},30),void e("playing")):$(j).off("ready.play").one("ready.play",this.play.bind(this))},this.pause=function(){return"vimeo"==i?h.api("pause"):void h["local"==i?"pause":"pauseVideo"]()},this.pauseAtStart=function(){this.seekTo(0),this.pause()},this.stop=function(){clearTimeout(n),this.state="idle",$(j).removeClass("started").removeClass("playing"),"local"==i?(h.src="",h.load()):"youtube"==i?(h.stopVideo(),h.seekTo(0)):"vimeo"==i&&h.api("unload")},this.volume=function(a){"local"==i&&(h.volume=a),"youtube"==i&&h.setVolume(100*a),"vimeo"==i&&h.api("setVolume",a)},this.setLoop=function(a){return h?("local"==i&&(h.loop=a?1:0),"youtube"==i&&h.setLoop(a),void("vimeo"==i&&h.api("setLoop",a))):$(j).off("ready.setLoop").one("ready.setLoop",this.setLoop.bind(this))},this.seekTo=function(a){"local"==i&&(h.currentTime=a),"youtube"==i&&h.seekTo(a),"vimeo"==i&&h.api("seekTo",a)},this.seekToRelative=function(a){f.seekTo(f.getDuration()*a)},this.getDuration=function(){return h.savedDuration?h.savedDuration:"local"==i?h.duration:"youtube"==i?h.getDuration():0},this.getOverlayPicture=function(a){var b;if("youtube"==i){var c=new Image;c.src=b="http://i1.ytimg.com/vi/"+k+"/maxresdefault.jpg",c.onload=function(){120==this.width&&90==this.height&&(b="http://i.ytimg.com/vi/"+k+"/0.jpg"),a(b)}}else"vimeo"==i?getVimeoThumb(k,a):"local"==i&&a(j.data("overlay")||"")},j.append(g);var m=$();if(this.spreaded=!!a.spreaded,this.toggleSpread=function(){f.spreaded=!f.spreaded,c()},$(window).on("resizeEvent",b),$(j).one("ready",b).on("spread",b),this.state="idle",$(j).on("playing",function(a){f.state="started",$(this).addClass("started").addClass("playing")}).on("paused ended",function(a){$(this).removeClass("playing")}).on("ended",function(){$(this).removeClass("started")}),"local"==i||"youtube"==i){var n;$(j).on("playing",function(){!function a(){$(j).trigger("progressCheck"),clearTimeout(n),n=setTimeout(a,100)}()}).on("paused ended",function(){clearTimeout(n)})}if(a.overlay){var o=$('<div class="video-overlay" />').appendTo(j);this.overlay=new Image,this.getOverlayPicture(function(a){f.overlay.src=a,o.css("backgroundImage","url("+a+")")})}else $(j).addClass("no-overlay");if(a.controls){var p=VideoPlayer.timeToString,q=$('<div class="video-controls" />').appendTo(j),r=$('<div class="video-bar" />').appendTo(q),s=$('<div class="video-play" />').appendTo(q),t=$('<div class="video-pause" />').appendTo(q);s.on("click",this.play).exclusiveClick(),t.on("click",this.pause).exclusiveClick();var u=$('<div class="video-progress"><div class="strip"></div></div>').appendTo(r),v=$('<div class="video-time">0:00 | 0:00</div>').appendTo(r);$(j).on("ready",function(){v.text("0:00 | "+p(h.savedDuration))}).on("progress",function(a,b){if(v.text(p(b.seconds)+" | "+p(b.duration)),!y){var c=100*b.percent-100;u.children(".strip").css("transform","translateX("+c+"%)"),c=b.percent*u.width(),w.css("transform","translateX("+c+"px)")}});var w=$('<div class="video-pointer grab-cursor"><div class="flesh"></div></div>').appendTo(r),x=$('<div class="video-pointer-time">00:00</div>').appendTo(w),y=!1;w.on("mousedown touchstart",function(a){if("mousedown"!=a.type||1==a.which){var b="touchstart"==a.type;a.stopPropagation(),y=!0,$(j).addClass("drag-pointer"),$overlay&&$overlay.show();var c,d,e=u.offset().left-7,g=u.width(),h=null,i=b?a.originalEvent.touches[0].pageX:a.pageX;c=Math.min(g,Math.max(0,i-e)),d=c/g,x.text(p(f.getDuration()*d)),a.preventDefault(),$(window).on("mousemove.pointer touchmove.pointer",function(a){var i=b?a.originalEvent.touches[0].pageX:a.pageX;c=Math.min(g,Math.max(0,i-e)),d=c/g,w.css("transform","translateX("+c+"px)"),u.children(".strip").css("transform","translateX("+(100*d-100)+"%)"),w.toggleClass("reversed",null!==h&&c>h),h=c,x.text(p(f.getDuration()*d)),a.preventDefault()}).one("mouseup.pointer touchend.pointer",function(a){f.seekToRelative(d),setTimeout(function(){y=!1},20),$(j).removeClass("drag-pointer"),$overlay&&$overlay.hide(),$(window).off("mousemove.pointer").off("touchmove.pointer"),w.removeClass("reversed")}),clearTimeout(E)}});var z=$('<div class="video-volume" />').appendTo(r),A=$('<span class="volume-minus">-</span>').appendTo(z),B=$('<canvas width="0" height="0" />').appendTo(z),C=$('<span class="volume-plus">+</span>').appendTo(z);!function(){function a(a){b=a/B.width(),b=Math.max(0,Math.min(1,b)),f.volume(b),a=Math.round(a),d.clearRect(0,0,g,h),d.save(),d.beginPath(),d.rect(0,0,a,h),d.clip(),d.fillText("VOLUME",g/2,h/2),d.restore(),d.save(),d.beginPath(),d.rect(a,0,g-a,h),d.clip(),d.fillStyle="red",d.fillText("VOLUME",g/2,h/2),d.restore()}var b=1;$(j).on("ready",function(a){f.volume(b)});var c=B[0],d=c.getContext("2d"),e=getComputedStyle(c);d.font=e.font;var g,h;setTimeout(function(){g=d.measureText("VOLUME").width,h=z.height(),c.setDimensions(g,h,!1,!0),d.fillStyle=e.color,d.textBaseline="middle",d.textAlign="center",d.fillText("VOLUME",g/2,h/2)},100),B.on("mousedown touchstart",function(b){if("mousedown"!=b.type||1==b.which){var c="touchstart"==b.type;b.stopPropagation(),i.stop();var d=B.offset().left,e=B.width(),f=c?b.originalEvent.touches[0].pageX:b.pageX,g=Math.min(e,Math.max(0,f-d)),h=g/e;a(g),b.preventDefault(),$(window).on("mousemove.pointer touchmove.pointer",function(b){var f=c?b.originalEvent.touches[0].pageX:b.pageX;g=Math.min(e,Math.max(0,f-d)),h=g/e,a(g),b.preventDefault()}).one("mouseup.pointer touchend.pointer",function(a){$(window).off("mousemove.pointer").off("touchmove.pointer").off("mouseup.pointer").off("touchend.pointer")})}});var i=$("<div />"),k=null;A.add(C).on("mousedown touchstart",function(c){if("mousedown"!=c.type||1==c.which){c.stopPropagation(),c.preventDefault(),i.stop();var d=$(this).is(A)?-.02:.02,e=getTime();!function c(){a((b+d)*B.width()),k=setTimeout(c,40)}(),$(window).one("mouseup touchend",function(c){if(clearTimeout(k),!(getTime()-e>180)){var f=B.width();i.stop().css("left",b*f).animate({left:(b+6*d)*f},{duration:200,step:function(b,c){a(b)}})}})}})}(),m=$('<div class="video-spread" />').appendTo(q),m.on("click",f.toggleSpread).exclusiveClick(),"vimeo"==i&&m.hide();var D=$('<div class="video-fullscreen" />').appendTo(q);$.browser.donkey&&D.hide(),D.on("click",function(a){Fullscreen.check()?Fullscreen.cancel():($(j).find("iframe, video, .video-overlay").css({transition:"none",opacity:0}),Fullscreen.request(j[0]),setTimeout(function(){$(j).find("iframe, video, .video-overlay").css({transition:"",opacity:""})},100)),a.preventDefault(),a.stopPropagation()}).exclusiveClick();var E=null;$(j).on("mousemove touchstart touchend playing",function(a){clearTimeout(E),$(this).removeClass("hidden-elements"),(0!=$(this).hasClass("playing")||"playing"==a.type)&&(E=setTimeout(function(){$(j).addClass("hidden-elements")},3e3))})}}function getMediaTypeByClass(a){return a.className.match(/youtube|local|vimeo/)[0]}function getMediaSource(a){var b,c;return c="object"==typeof a?a:{webm:a.getAttribute("data-webm"),mp4:a.getAttribute("data-mp4"),ogv:a.getAttribute("data-ogv")},b=canPlayOGG?c.ogv||c.mp4:c.mp4,canPlayWebM&&(b=c.webm||b),b+"?nocache="+getRandomSymbols(5)}function getVimeoThumb(a,b,c){$.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+a+".json",jsonp:"callback",dataType:"jsonp",success:function(a){var d=a[0].thumbnail_large;b(d,c)}})}function appendScript(a){var b=document.createElement("script");b.src=a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}function onYouTubeIframeAPIReady(){YoutubeAPILoaded=!0,$(window).trigger("YoutubeAPILoaded")}function onYoutubeReady(a){return YoutubeAPILoaded?a():void $(window).one("YoutubeAPILoaded",function(){a()})}function getYoutubeAscpectRatio(a,b){return b(!0)}function ElementVisibility(a,b){var c=this;c.elem=a;var d=getOffsetTop(a),e=this.visible=!1,f=c.todo={show:[],hide:[],scroll:[]};b=void 0===b?.5:b,$(window).on("pagePrepare resizeEvent",function(b){d=getOffsetTop(a)}),$(page).on("scrolling",function(d,g){if(!Scroll.skipTriggers){var h=e,i=getOffsetTop(a),j=a.offsetHeight,k=b*j;k=Math.min(k,.4*w.height),e=c.visible=w.height-g>i+k&&i+j>-g+k,e&&f.scroll.forEach(function(a,b){a.call(c,(w.height-g-i)/j,g)}),h!=e&&f[e?"show":"hide"].forEach(function(a,b,d){a.call(c,Scroll.position,i,j),a.once&&(d[b]=function(){})})}}),c.onshow=function(a,b){b&&(a.once=!0),f.show.push(a)},c.onhide=function(a,b){b&&(a.once=!0),f.hide.push(a)},c.onscroll=function(a){f.scroll.push(a)}}function TouchMove(a){var b=this,c=this.namespace=a.namespace||"touchmove",d=this.vertical=!!a.vertical,e=d?"clientY":"pageX",f=this.inertia={allow:a.inertia||!0};this.pos=a.pos||0,this.downed=!1;var g=!1;a.elem.on("mousedown."+c+" touchstart."+c,function(h){var i=b.touchEvent="touchstart"==h.type;if(i)g=!0;else if(g)return;if(b.hoax=!1,b.downed=!0,a.noOverlay||$overlay.show(),a.ondown)var j=a.ondown.call(b,b.pos,h);var k=h[e]||h.originalEvent.touches[0][e],l=b.pos;if(f.allow&&(f.momentum=0,f.X=k,f.time=getTime()),i)if(h.stopPropagation(),d||a.alwaysPrevent)var m=!0;else var m=null,n=h.originalEvent.touches[0].clientY;$(window).on("mousemove."+c+" touchmove."+c,function(c){var d=c[e]||c.originalEvent.touches[0][e],g=d-k;if(i){if(null===m){var h=c.originalEvent.touches[0].clientY;m=Math.abs(h-n)<Math.abs(g),0==m&&(b.hoax=!0,$(window).triggerHandler("touchend"))}if(0==m)return}if(b.pos=l-g,a.onmove)var j=a.onmove.call(b,b.pos,g,c);"number"==typeof j&&(b.pos=j),f.allow&&(f.momentum=(d-f.X)/(getTime()+1-f.time),f.X=d,f.time=getTime()),(!i||i&&m)&&c.preventDefault()}).one("mouseup touchend",function(d){b.downed=!1,f.allow&&(b.pos-=120*f.momentum);var e=l-b.pos;if(a.onup)var g=a.onup.call(b,-b.pos,e,d);"number"==typeof g&&(b.pos=g),a.noOverlay||$overlay.hide(),$(window).off("mousemove."+c).off("touchmove."+c)}),i||j!==!1||$(window).trigger("mouseup"),i||h.preventDefault()})}function TouchBubbles(a){function b(){i=getTime(),j=e.opacity}function c(a){var b=Math.min(e.fadeDuration,getTime()-i),c=MoveAnimation.easing.ease(b,0,1,e.fadeDuration),d=(e.visible?1:0)-j;return j+d*c}function d(){if(g.clearCanvas(),e.opacity=c(),0==e.visible&&0==e.opacity)return k.hide();for(var a=e.interval,b=e.linesNum,f=0;f<e.linesNum;f++){var i=(getTime()+a/b*f)%a/a;i=Math.min(1,Math.max(0,i));var j=-i*(i-2);g.lineWidth=1+3*j,g.globalAlpha=.2*(1-j)*Math.min(1,e.opacity),g.beginPath(),g.arc(e.X,e.Y,j*e.radius+e.baseRadius,0,2*Math.PI),g.stroke()}h=requestAnimationFrame(d)}var e=this;e.container=a;var f=this.canvas=document.createElement("canvas");f.className="touch-bubbles",f.setDimensions(a.offsetWidth,a.offsetHeight,!1,!1);var g=this.ctx=f.getContext("2d");g.strokeStyle="white";var h,i,j,k=$(f).hide().addClass("grab-cursor").prependTo(a);e.X=e.Y=0,e.opacity=0,e.visible=!1,e.show=function(a,c){$.browser.mobile||(k.show(),e.visible=!0,b(),0==e.opacity&&e.position(a,c))},e.position=function(a,b){$.browser.mobile||(e.X=a,e.Y=b,cancelAnimationFrame(h),d())},e.hide=function(){$.browser.mobile||(e.visible=!1,b())},e.showEvent=function(a,b){b=b||0;var c=a.originalEvent||a;c=a.touches?a.touches[0]:a,e.show(c.pageX,c.clientY+Scroll.position+b)},e.positionEvent=function(a,b){b=b||0;var c=a.originalEvent||a;c=a.touches?a.touches[0]:a,e.position(c.pageX,c.clientY+Scroll.position+b)}}function Togglers(a){var b=this;this.active=0,this.opts=a,a.amount=a.amount||0,a.handler=a.handler,a.style&&a.elem.addClass(a.style);for(var c=$('<hr class="over-active" />').appendTo(a.elem),d=$('<div class="movable" />').appendTo(a.elem),e=0;e<a.amount;e++)d.append("<hr />");var f=a.thumbWidth||d.children("hr").outerWidth(!0),g=parseInt(d.children("hr").css("marginLeft"),10)||0;a.elem.css("width",a.amount*f),a.absolute&&a.elem.css("marginLeft",a.amount*f/-2),d.on("mousedown",function(a){a.stopPropagation()}).on("click","hr",function(c){d.find(".sheb").remove();var e=d.children("hr").index(this);a.handler.call(b,e),b.setActive(e),c.preventDefault()}),a.amount<2&&$(a.elem).addClass("one-toggler"),this.setAmount=function(b){a.amount=b,a.elem.css("width",b*f).toggleClass("one-toggler",2>b),a.absolute&&a.elem.css("marginLeft",b*f/-2),d.find(".sheb").remove();var c=d.find("hr:not(.sheb):not(.over-active)");c.slice(b).remove();for(var e=0;b>e;e++)void 0===c[e]&&d.append("<hr />")},this.setActive=function(a){if(a!=b.active){d.find(".sheb").remove();var e=a<b.active;b.active=a,d.add(d.children("hr")).css({opacity:"",marginLeft:"",transition:"0s"}),setTimeout(function(){d.append("<hr />").css("transform3d","translateX("+(e?-f:f)+"px)"),e?(d.children("hr:first").css("opacity",0),d.children("hr:last").addClass("sheb")):(d.children("hr:first").css("marginLeft",-f+g).addClass("sheb"),d.children("hr:last").css("opacity",0)),setTimeout(function(){d.add(d.children("hr")).css("transition",".45s"),d.css("transform3d","translateX(0)"),d.children("hr:"+(e?"last":"first")).css("opacity",0),d.children("hr:"+(e?"first":"last")).css("opacity",1),$.support.transition?c.css("transform3d","translateX("+f*a+"px) scale(1.12)"):c.stop().animate({left:f*a},450)},0)},0)}}}function Preloader(a){var b='<div class="preloader-box">	<svg viewBox="-2 -1 106 106" width="70px" height="70px" class="preloader">	<defs><filter id="blur"><feGaussianBlur in="SourceGraphic" stdDeviation="1.5,1" /></filter></defs>	<path class="drib" d="M92,29c0,0-0.061-19.398-15-22c-9.445-1.645-11.993,4.08-12,7	c-0.004,1.832,1.753,6.201,6,6s3.118-1.947,9-2S89.118,22.482,92,29z"/>	<path class="drib" d="M95.79,64.313c0,0,13.246-14.172,4.146-26.302	c-5.753-7.668-11.532-5.245-13.537-3.122c-1.258,1.332-2.971,5.718,0.26,8.481c3.231,2.763,3.605,0.718,7.926,4.709	C98.906,52.069,98.156,57.59,95.79,64.313z"/>	<path class="drib" d="M72.381,90.905c0,0,19.353,1.367,23.518-13.269	c2.634-9.253-2.808-12.204-5.719-12.425c-1.827-0.139-6.368,1.283-6.614,5.514c-0.247,4.23,1.613,3.238,1.048,9.08	C84.048,85.646,79.185,88.525,72.381,90.905z"/>	<path class="drib" d="M38.165,95.71c0,0,13.023,14.379,26.159,6.697	c8.304-4.857,6.418-10.752,4.47-12.927c-1.222-1.364-5.485-3.48-8.59-0.598c-3.105,2.883-1.076,3.455-5.527,7.28	C50.226,99.987,44.723,98.7,38.165,95.71z"/>	<path class="drib" d="M10.03,73.406c0,0-0.645,19.189,13.984,22.792	c9.248,2.278,11.967-3.208,12.08-6.096c0.071-1.812-1.502-6.253-5.695-6.348c-4.193-0.094-3.144,1.711-8.942,1.358	C15.658,84.759,12.633,80.051,10.03,73.406z"/>	<path class="drib" d="M5.738,38.287c0,0-11.969,15.012-2.382,26.633	c6.061,7.347,11.517,4.568,13.331,2.318c1.138-1.411,2.526-5.914-0.781-8.492c-3.308-2.578-3.543-0.504-7.985-4.248	C3.479,50.755,3.861,45.172,5.738,38.287z"/>	<path class="drib" d="M29.455,9.937c0,0-19.167,1.131-21.402,16.029	c-1.413,9.419,4.301,11.62,7.186,11.465c1.81-0.097,6.087-2.074,5.794-6.257s-1.994-2.972-2.178-8.778	C18.67,16.59,23.079,13.143,29.455,9.937z"/>	<path class="drib" d="M64.234,5.833c0,0-14.84-12.182-26.596-2.762	c-7.433,5.955-4.732,11.451-2.508,13.296c1.395,1.158,5.877,2.611,8.502-0.66c2.625-3.271,0.554-3.536,4.36-7.923	C51.799,3.395,57.376,3.857,64.234,5.833z"/>	</svg></div>';a=$(a);var c=this.$preloader=$(b).appendTo(a),d=this;this.start=function(a){if(!$.support.transition){c.css("opacity",0).stop().animate({opacity:1},1200);var b=2e3;!function a(){var e=getTime()%b/b*-360;c.css("transform","rotate("+e+"deg)"),d.sTimer=setTimeout(a,25)}()}c.addClass("started"),a&&setTimeout(a,1200)},this.stop=function(){$.support.transition?(c.removeClass("started"),setTimeout(function(){c.remove()},2e3)):c.stop().animate({opacity:0},1500,function(){clearTimeout(d.sTimer),$(this).remove()})}}function handleAppendedBlocks(a){drawIcons(),$(".skills-block",a).each(function(){new SkillsBlock(this)})}function handleHash(a){if(0!=pageReady){var b=location.hash.substr(1),c=$('section[data-name="'+b+'"]'),d=c.getOffsetTop()||0;d=Math.min(d,Scroll.available);var e=500+Math.abs(Scroll.position-d)/4;d!==Scroll.position?(Scroll.skipTriggers=!0,Scroll.to(d,e,"easeInOutSine"),$(page).one("scrollingOver",function(){Scroll.skipTriggers=!1,$(page).trigger("scrolling",[-Scroll.position])})):$(page).trigger("scrolling",[-Scroll.position]);var f=0;Menu.$anchors.each(function(a){location.href==this.href&&(f=a)}),Menu.setActive(f),a.preventDefault()}}function LoaderItem(a){this.name=a,Loader.items.push(this),setTimeout(this.done.bind(this),this.timeout,!0)}function drawIcons(a){function b(a,b){b.drawImage(a,0,0,a.width*b.ratio,a.height*b.ratio);for(var c=b.color.split(/,|\(|\)/),d=+c[1],e=+c[2],f=+c[3],g=c.length>5?parseFloat(c[4]):null,h=b.getImageData(0,0,b.canvas.width,b.canvas.height),i=h.data,j=0;j<i.length;j+=4)i[j+0]=d,i[j+1]=e,i[j+2]=f,null!==g&&(i[j+3]=i[j+3]*g);b.putImageData(h,0,0)}var c={},d=new Image;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAcCAYAAACUJBTQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzExNzRCRTIwOTQ3MTFFNThGN0JCRjZERUMxRDAxODgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzExNzRCRTMwOTQ3MTFFNThGN0JCRjZERUMxRDAxODgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMTE3NEJFMDA5NDcxMUU1OEY3QkJGNkRFQzFEMDE4OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMTE3NEJFMTA5NDcxMUU1OEY3QkJGNkRFQzFEMDE4OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ple3FVEAAAJcSURBVHjarJRNiE5RGMfH62UyZDRJQ5KdfBRFWUizUBpfYRL5Kt8LLAbFiCILiYURu1EzkmEhND4jY2x8ZSxYYEX52JDSaCaTwe+p/9Htds5979H71K/uPfec+z/nPP/nKVTExRzYDZNjFhUi5jbCORgL92FhRZljJ7yRgMUM+Az1eRYPyth1rZ5rYAu0w8fEnOlQB0vh3v+IvNRPv5XYZCXsh3XQGXs9JjIh59zZurq6ciQ+FE9hBVyCub4JRc/YapiSGmuGYZ65n+AIPIImuAEL9B4UWQnH4EtqvAuGeES+J56/yhiXYRk8853KjvwBJkXmxMUiuADzlKNZ6ZMsh5MwH956ftAGValdbw+IWaFugA5YDC+K2sFpFdbrwMJrqevqLXGqu7BJOao3kTWmliHgRGKjG3rMSMVE9bbCRhgIiAz3jL+DbZ7x0eoCf5I5aVTrOAubPYuaA3b/4Rmr0XVdgX6odgvtpUE7bvG0m66cVzRKAh2qn6Z0xf+U0HiY6vlBrX7Q53GbC2v/d+BwVlvpk50fwN7EicbImp16/q3rqNT3kXAAjsPBPL3L7LkEpql2nECbukGP8mYFd1U5uAWPYV9Mg+xV/cyUtS/CicR3c81WtZ/38Bz2hBJVzEjiUNn2FBz1fB9QwVmRTtT8/piTVCvJ1+WSUJjQepmmPbTpQoaAcSiHbU1orZ5NaHApEXPJbXgot+SNX2pPdnXn00JJkRFwE57IvrFh+ViljbYmhZxIlQS6s1ySU6hBvavF/d+JnIFXsMs1tTIIjVNP/OcGK7gdouzxV4ABANIZgqMqCs/jAAAAAElFTkSuQmCC",c.letter=function(a){this.setIconDimensions(25,28),$(d).onImageReady(function(){b(d,a)})},c.quote=function(a){function b(){a.fR(.5,18,9,12),a.save(),a.R(0,0,9,30).clip(),a.begin().move(2.75,18).line(2.75,11).bezier(2.75,7,7,2.75,11,3).stroke(),a.restore()}this.setIconDimensions(25,30),a.lineWidth=4.5,b(),a.trans(14,0),b()},c.heart=function(a){function b(){a.begin().move(6,2).bezier(4.8,-1.65,-.6,0,0,4.2).bezier(.4,6.5,2,7.7,3.4,8.6).bezier(4.8,9.5,5.8,10.5,6,11).close().fill()}this.setIconDimensions(12,11),b(),a.scale(-1,1),a.trans(-12,0),b()},c.author=function(a){this.setIconDimensions(11,12),a.lineWidth=1.01,a.fR(2,10,7,2).cR(3,10,5,1).fR(0,11,1,1).fR(10,11,1,1).begin().move(.5,11.5).bezier(.5,4.5,10.5,4.5,10.5,11.5).stroke(),a.lineWidth=1,a.begin().drawArc(5.5,2.5,2).stroke()},c.category=function(a){this.setIconDimensions(15,12),a.fR(0,2,15,10).cR(1,9,13,2).cR(1,3,13,5).cR(2,2,11,1).fR(3,0,9,4).cR(4,1,7,3).fR(5,2,5,1)},c.comments=function(a){this.setIconDimensions(15,12),a.fR(0,0,12).fR(11,1,1,8).fR(5,8,6).fR(4,9).fR(3,10).fR(2,8,1,3).fR(0,8,2).fR(0,1,1,7).fR(6,10,4).fR(10,11,2).fR(11,10,4).fR(14,3,1,7).fR(13,3).fR(2,4,2).fR(5,4,2).fR(8,4,2)},c["calendar-small"]=function(a){this.setIconDimensions(9,10),a.fR(0,1,9,9).cR(1,1,7,8).fR(1,3,7).fR(2,0,1,2).fR(4,1,1,2).fR(6,0,1,2).fR(2,5).fR(4,5).fR(6,5).fR(2,7).fR(4,7).fR(6,7)},c["comments-small"]=function(a){this.setIconDimensions(11,10),a.fR(0,0,9).fR(8,1,1,6).fR(4,6,4).fR(3,7).fR(2,8).fR(1,7,1,2).fR(0,6,2).fR(0,1,1,5).fR(5,8,3).fR(8,9,2).fR(9,8,2).fR(10,3,1,5).fR(9,3).fR(2,3,1).fR(4,3,1).fR(6,3,1)},c.date=function(a){this.setIconDimensions(12,12),a.fR(0,1,12,11).cR(1,4,10,7).cR(2,1,3,2).cR(7,1,3,2).fR(3,0,1,2).fR(8,0,1,2).fR(2,5,2,2).fR(5,5,2,2).fR(8,5,2,2).fR(2,8,2,2).fR(5,8,2,2).fR(8,8,2,2)},c.time=function(a){this.setIconDimensions(12,12),a.drawArc(6,6,5.5).fR(5,3,1,3).fR(5,6,3,1)},c.video=function(a){this.setIconDimensions(26,26),a.fR(0,0,26,26).cR(7,2,12,10).cR(7,14,12,10).cR(2,2,3,2).cR(2,6,3,2).cR(2,10,3,2).cR(2,14,3,2).cR(2,18,3,2).cR(2,22,3,2).cR(21,2,3,2).cR(21,6,3,2).cR(21,10,3,2).cR(21,14,3,2).cR(21,18,3,2).cR(21,22,3,2)},c.photo=function(a){this.setIconDimensions(26,26),a.fR(0,0,26,26).cR(2,2,22,17).cR(2,21,2,3).cR(6,21,2,3).cR(10,21,2,3).cR(14,21,2,3).cR(18,21,2,3).cR(22,21,2,3).drawArc(7,7,1.5,1.5).begin().move(5,16).line(20.5,16).line(17,9,14,13).line(13.5,13).line(11.5,10.5).line(9,14).line(7.5,13).close().fill()},c.cross=function(a){this.setIconDimensions(30,30),a.lineWidth=2,a.begin().move(.5,.5).line(29.5,29.5).stroke(),a.begin().move(29.5,.5).line(.5,29.5).stroke()},c.details=function(a){this.setIconDimensions(30,30),a.fR(0,5,26.3,2).fR(0,11,28,2).fR(0,17,22.5,2).fR(0,23,28,2)},c.bar=function(a){this.setIconDimensions(30,30),a.fR(0,13,8,4).fR(10,13,8,4).fR(20,13,8,4)};var e=$('[class*="icon-"]');e.each(function(b){if(!$(this).find("canvas").length||a){var d=getComputedStyle(this).color;if(a){var e=$(this).find("canvas");if(d===e[0].context.color)return;e.remove()}var f=this.offsetWidth||0,g=this.offsetHeight||0,h=createCanvas(f,g),i=h.context;i.fillStyle=i.strokeStyle=i.color=d,i.disableSmooth(),$(this).append(h);for(var j in c)if($(this).hasClass("icon-"+j))return c[j].call(h,i)}})}function MainBlock(a){function b(){$(p).css({transition:"700ms ease-in-out",opacity:1}).transitEnd(function(){s=!0,$(window).triggerHandler("loadHeavy"),$.browser.mobile&&D.css("opacity",1)},null,"opacity"),setTimeout(function(){s||(s=!0,$(window).triggerHandler("loadHeavy"),$.browser.mobile&&D.css("opacity",1))},1e3),g()}function c(a){z=h.getOffsetTop(),y=Math.max(h.height(),w.height),$(p).css("transition",""),p.setDimensions(w.width,y,!1,!0),F.node.pos=p.pos=-u*w.width,I.pos=-p.pos,r=x*w.width,$.browser.mobile&&p.getContext("2d").style("rgba(0,0,0,0.35)").fR(0,0,w.width,y),s&&(pageReady&&e(),g())}function d(a){var b=u,c=C,d=800+250*Math.abs(b-a);u=a,H.setActive(a);var e=n[u];b!=u&&e.state&&(e.seekTo(0),e.play()),$.browser.mobile&&(E=!0,q.add(j).add(D).css("transition",d+"ms").first().transitEnd(function(){E=!1})),f(a*w.width,d,function(a,b){C=(1-b)*Math.min(c,1)},function(){b!=u&&n.forEach(function(a){a.state&&a!=e&&a.stop()}),C=0,$.browser.mobile||g()})}function e(){if(j.length){var a=j.find("h2").eq(u),b=a.innerWidth()/10;m.css("transform3d","scale("+b+",1)")}}function f(a,b,c,d){var f="flat"==c;return f&&(c=null),!f&&0>a&&(a/=2),!f&&a>r&&(a=r+(a-r)/2),e(),$.browser.mobile&&(b=0),0===b?(t=!1,F.clear(),F.node.pos=p.pos=-a,I.pos=a,g(),c&&c(-a,1),void(d&&d())):(t=!0,void F.animate(a,b,{complete:function(){t=!1,d&&d()},step:function(a,b){
c&&c(a,b),p.pos=a,I.pos=-a,g()}}))}function g(){if($.browser.mobile){if(p.pos>=0){var a=p.pos/w.width*(w.width-150)-w.width;D.css("transform3d","translateX("+Math.round(a)+"px)")}else if(-p.pos>=r){var a=(p.pos+r)/w.width*(w.width-150);D.css("transform3d","translateX("+Math.round(a)+"px)")}}else{var b=p.getContext("2d");if(b.clearCanvas(),n.forEach(function(a,c){a.src&&b.drawFilledImage(a,p.pos+c*w.width,B,w.width,y)}),b.fillStyle="rgba(0,0,0,"+(.35+.5*A)+")",b.fillRect(0,0,w.width,y),C>0){var c=p.pos%160/160;c*=200,b.save(),b.globalAlpha=Math.min(C,1),b.fillStyle=stripesPattern,b.translate(c,0),b.fillRect(-c,0,b.canvas.width,b.canvas.height),b.restore()}}var d=p.pos/w.width*(w.width+500);j.css("transform3d","translateX("+Math.round(d)+"px)"),q.css("transform3d","translate("+p.pos+"px,"+B+"px)")}this.container=a;var h=$(a),i=h.children(".content"),j=h.find(".main-parallax-headers"),k=$('<hr class="main-parallax-headers-line above">').insertBefore(j),l=$('<hr class="main-parallax-headers-line below">').insertAfter(j),m=k.add(l);k.before("<br>"),l.after("<br>");var n=[],o=$(".main-slides > *",a),p=$(".main-parallax",a)[0],q=$('<div class="main-video" />').prependTo(a);o.length>1&&i.addClass("grab-cursor");var r,s=!1,t=!1,u=0,v=o.length,x=v-1,y=Math.max(h.height(),w.height),z=0,A=0,B=0,C=0;if($.browser.mobile)var D=$('<div class="main-parallax-stripes" />').prependTo(a),E=!1;o.each(function(a){function c(){return new VideoPlayer({container:h,type:getMediaTypeByClass(e),source:$(e).data(),loop:!0,controls:!1,overlay:!0,spreaded:!0})}var d,e=this,f=$('<div class="parallax-header"></div>').append($(this).children()).appendTo(j);if($("a",f).exclusiveClick(),$(this).hasClass("video")){var g,h=$('<div class="'+this.className+' spread" />').on("playing",function(){g.volume(0),g.setLoop(!0)}).css("left",100*a+"%").appendTo(q);a>0?(d=new LoaderItem("main video"),h.one("ready",function(){d.done()}),$(window).one("loadHeavy",function(){g=n[a]=c()}),n.push({})):(h.one("ready",function(){b()}),$(window).on("pagePrepare",function(){g.play()}),g=c(),n.push(g))}else{var i=new FakeImage($(this).data("src"));$(i).on("load",function(){a>0?d.done():b()}),a>0?(d=new LoaderItem("main image"),$(window).one("loadHeavy",function(){i.fakeLoad()})):i.fakeLoad(),e.hasAttribute("data-crop-position")&&(i.crop=e.getAttribute("data-crop-position").split(" ")),$.browser.mobile&&($('<div class="slider-image" />').css("left",100*a+"%").append(i).appendTo(q),$(i).centerImages(),$(window).on("resizeWidth",function(){$(i).centerImages()})),n.push(i)}}).parent().remove(),$(window).one("pageReady",function(a){setTimeout(e,1e3)});var F=new MoveAnimation({pos:0}),G=new TouchBubbles(a),H=new Togglers({elem:$(".togglers",a),amount:v,absolute:!1,handler:function(a){d(a)}}),I=new TouchMove({elem:h,namespace:"main",ondown:function(a,b){if($.browser.mobile){var c=q.getTranslate().X||0,d=E;q.add(j).add(D).css("transition",""),d&&f(-c,0,"flat")}else f(I.pos,0);I.touchEvent&&b.originalEvent.touches[0]&&(G.baseRadius=b.originalEvent.touches[0].radiusX+10),G.showEvent(b)},onmove:function(a,b,c){C=Math.max(C,Math.abs(b/200)),f(a,200),G.positionEvent(c)},onup:function(a){var b=Math.round(-a/w.width);b=Math.max(0,Math.min(v-1,b)),d(b),G.hide()}});Scroll.step(function(a){if(!$.browser.mobile){if(a-=z,a>y)return void clearTimeout(M);A=Math.abs(a)/y,B=a-.5*a,!t&&s&&g(),L()}}),$(window).on("resizeEvent.home",c).on("fontsUpdated",e),c();var J=$(".slide-down-button",a);if(J.length){J.on("mousedown",function(a){a.stopPropagation()}).on("click",function(a){Scroll.to(y)})[0].setDimensions(16,29,!1,!0);var K=function(a,b,c){a.strokeStyle=window.COLOR||J.css("color"),a.globalAlpha=c,a.lineWidth=2.35,a.beginPath(),a.moveTo(1.2,b+1.2),a.lineTo(8,b+7.5),a.lineTo(14.8,b+1.2),a.stroke()},L=function(){function a(a){var d=Math.abs(c-a);d=Math.max(0,Math.min(1,1-.12*d)),K(b,a,.4+.6*d)}clearTimeout(M),M=setTimeout(L,25);var b=J[0].getContext("2d");b.clearCanvas();var c=getTime()%2e3/10;c-=50,c*=.2,a(0),a(10),a(20)},M=null;L()}else var L=function(){}}function PortfolioBlock(a){function b(b){var c=G.length?51:0,d=Math.max(2,2+v-w.height+b+a.offsetTop+c);k.css("bottom",d)}function c(a){if(o=Math.round(w.width/f.item.w),q=f.itemWidth=Math.ceil(w.width/o),s=q/f.item.w,r=f.itemHeight=Math.round(f.item.h*s),t=Math.min(3,Math.ceil(i.length/o)),u=Math.ceil(i.length/t),u=Math.max(o,u),p=u*q-w.width,x=w.width*(w.width/(p+w.width)),w.width<800&&(x=Math.max(w.width/5,x)),y=w.width-x,k.css("width",x),g.toggleClass("grab-cursor",p>2),v=r*t,g.css({height:v,width:q*u}),$.support.flexBox||i.find(".info-hover").each(function(){var a=0;$(this).children().each(function(){a+=$(this).outerHeight(!0)}).parent().css("paddingTop",(r-a)/2)}),l.attr({width:w.width,height:v})[0].getContext("2d").fillStyle=stripesPattern,$.browser.mobile){var b=l[0].getContext("2d");b.trans(0,0).fR(0,0,b.canvas.width,b.canvas.height)}a&&Scroll.resize()}function d(a,b){function c(a){if(g.css("transform3d","translateX("+a+"px)"),$.browser.mobile){var b=0>a?.5*(a+p)+h.width:.5*a-h.width;l.css("transform","translateX("+b+"px)")}else!function(){var b=l[0].getContext("2d");b.clearCanvas(),b.save(),b.translate(.5*a,0),b.fR(.5*-a,0,b.canvas.width,b.canvas.height),b.restore()}();!function(b){if(0>b)var c=0,d=1-a/h.width,e=Math.min(1,a/h.width*2);else b>1?(d=1-(-a-p)/h.width,c=y+(1-d)*x,e=Math.min(1,2*(b-1))):(c=b*y,d=1,e=0);var f="rgba(255,"+(255-Math.floor(50*e))+","+(255-Math.floor(255*e))+","+(.55+.45*e)+")";k.css({background:f,width:d*x,transform:"translateX("+c+"px)"})}(-a/p)}0>a&&(a/=2),a>p&&(a=(a-p)/2+p),$.browser.mobile&&(b=0),0===b?(B.clear(),E.pos=a,B.node.pos=-a,c(-a)):B.animate(a,b,{step:c})}function e(a){if("all"==F)var b=i.removeClass("inactive").get();else var b=i.get().sort(function(a,b){var c=$(a).data("filter").split(" ").indexOf(F),d=$(b).data("filter").split(" ").indexOf(F);return $(a).toggleClass("inactive",-1==c),$(b).toggleClass("inactive",-1==d),d>c?1:c>d?-1:0});j=$(b).each(function(b){var c=b/t>>0,d=b%t,e=c*q,f=d*r;$(this).css({width:q,height:r,transform:$.support.transition?"translate("+e+"px,"+f+"px)":""}).toggleClass("trans",a).transitEnd(function(){$(this).removeClass("trans")}),$.support.transition||$(this).stop().animate({left:e,top:f},900)})}this.container=a;var f=this,g=$(".portfolio-preview",a).addClass("grab-cursor"),i=$("article",a),j=i,k=$('<hr class="thumb-horizontal">').appendTo(a),l=$('<canvas class="portfolio-stripes">').appendTo(a),m=null,n=new ElementVisibility(a,0);n.onscroll(function(a,c){clearTimeout(m),b(c)});var o,p,q,r,s,t,u,v,x,y;$(window).on("resizeEvent.portfolio",function(a){c(),E.pos=Math.max(0,Math.min(E.pos,p)),d(E.pos,700),e(!1),i.find(".preview img").centerImages(),H.css({left:I[0].offsetLeft}),clearTimeout(m),m=setTimeout(function(){b(-Scroll.position)},200)}).one("pagePrepare",function(){runApart(function(){H.css({left:I[0].offsetLeft})})}).on("fontsUpdated",function(){H.css({width:I[0].offsetWidth,left:I[0].offsetLeft})}).one("pageReady",function(){H.css({width:I[0].offsetWidth,left:I[0].offsetLeft})}),c(!0),i.find(".preview img").centerImages();var z,A,B=new MoveAnimation({pos:0}),C=new TouchBubbles(a),D=$(a).getOffsetTop(),E=new TouchMove({elem:g,namespace:"portfolio",ondown:function(b,c){D=$(a).getOffsetTop(),C.showEvent(c,-D),z=getTime(),A=c.target,$.browser.mobile?(g.add(l).add(k).css("transition",""),k.add(l).css("opacity",1)):(l.cssAnim({opacity:1},1e3),k.stop(!0).animate({opacity:1},600))},onmove:function(a,b,c){C.positionEvent(c,-D),d(a,200)},onup:function(a,b){return C.hide(),$.browser.mobile?(E.hoax||(g.add(l).css("transition","900ms"),k.css("transition","all 900ms, opacity 1s .9s")),k.add(l).css("opacity",0)):(l.cssAnim({opacity:0},1e3),k.stop(!0).animate({opacity:0},600)),!$.browser.mobile&&getTime()-z<350&&Math.abs(b)<10?$(A).click():(a=Math.max(0,Math.min(-a,p)),a=Math.round(a/q)*q,d(a,900),a)}}),F="all",G=$(".portfolio-filter",a),H=$(".portfolio-filter-active",a),I=$(".active",G);G.find("a").on("click",function(a){a.isTrigger&&"all"!=$(this).data("filter")||(I.removeClass("active"),I=$(this).addClass("active"),$.support.transition?H.css({left:this.offsetLeft,width:this.offsetWidth}):H.stop().animate({left:this.offsetLeft,width:this.offsetWidth},900),F=$(this).data("filter"),e(!a.isTrigger))}).first().click(),0==G.length&&e(!1),$.browser.mobile&&i.each(function(){var a,b=($(this),$(".info-hover",this).children());b.filter("p").length&&(a=b.filter("p")[0]),b.filter("i").length&&(a=b.filter("i")[0]),b.filter("h5").length&&(a=b.filter("h5")[0]),$('<div class="mobile-plus" />').on("click",function(a){var b=$(this).css("opacity");.5>b&&(a.stopPropagation(),a.preventDefault())}).insertAfter(a)});var J=!1;i.on("click",function(b){function c(){var b=$('<div class="portfolio-fullscreen hidden" />').appendTo(document.body),c=$('<div class="portfolio-items" />').appendTo(b),d=$('<div class="portfolio-bar" />').appendTo(b),g=j.filter(":not(.inactive)").each(function(a){var b=$(this).data("url"),e=$(this).data("media")||"photo",f=$(".preview img",this)[0].src;$("<article />").attr("data-url",b).appendTo(c),$('<article><i class="icon-'+e+'"></i><img src="'+f+'"></article>').appendTo(d)});drawIcons();var h=g.index(e),i=getTime(),k=1e3,l=new Portfolio(b,h);l.ready=function a(){var c=k-(getTime()-i);return c>0?setTimeout(a,c+10):(setTimeout(f.stop,500),void($.support.transition?b.removeClass("hidden").transitEnd(function(){$(page).hide()}):b.css("opacity",0).removeClass("hidden").animate({opacity:1},900,function(){$(page).hide()})))},l.close=function(){$(page).show(),$.browser.mobile&&(document.body.scrollTop=$(a).getOffsetTop()),$(window).triggerHandler("resizeEvent"),$(window).triggerHandler("resizeFix"),$(window).triggerHandler("resizeWidth"),runApart(function(){J=!1,Scroll.scrollMove(1),Scroll.disabled=!1,e.removeClass("loading").removeClass("fixed"),$.support.transition?b.addClass("hidden"):b.stop().animate({opacity:0},950),setTimeout(function(){l.destroy()},1e3)})}}var d=$(b.target);if(!$.browser.mobile||!d.is(":not(.mobile-plus)")){var e=$(this).addClass("fixed");J=!0,Scroll.disabled=!0;var f=new Preloader(this);setTimeout(function(){e.addClass("loading"),f.start(c)},20)}})}function DevicesBlock(a){this.container=a;var b=$(".devices-item",a),c=$(".devices-image",a);$.support.flexBox||b.each(function(){var a=$(".devices-list",this);a.prependTo(this)}),c.each(function c(){function d(){k.scale(1,-1);var c=g.parent().data("reflect-ready",!0),d=c.siblings(".devices-item");if(!$.support.flexBox){var e=$(a).height();b.each(function(){var a=this.offsetHeight,b=$(".devices-list",this),c=(e-b.height())/2;b.css("marginTop",-(e-a)+c)})}if(c.add(d).find(".devices-image").each(function(){var a=$(this).data("type"),b="ipad"==a?-16:"iphone"==a?-2:0;$(this).find(".devices-reflection").css({top:this.offsetTop+this.offsetHeight+b})}),0==d.length)return k.makeGradient();if(!c.hasClass("overlap")&&!d.hasClass("overlap"))return k.makeGradient();if(1==d.data("reflect-ready")){var f=c.hasClass("overlap")?c.find(".devices-reflection")[0]:d.find(".devices-reflection")[0],h=c.hasClass("overlap")?d.find(".devices-reflection")[0]:c.find(".devices-reflection")[0],i=h.getBoundingClientRect(),j=f.getBoundingClientRect(),l=h.getContext("2d");l.globalCompositeOperation="destination-out";var m=j.left-i.left,n=j.bottom-i.bottom;l.drawImage(f,m,n,j.width,j.height),l.makeGradient();var o=f.getContext("2d");o.makeGradient()}}var e=this.className.match(/iphone|ipad/);if(e||(e=["custom"]),e){e=e[0];var f=this,g=$(this).data("type",e);if(!$(this).hasClass("no-reflection")){if(0==this.offsetWidth||0==this.offsetHeight)return setTimeout(function(){c.call(f)},1e3/60);var h=$(this).is('[class*="animation-"]');h&&$(this).on("animationCompleted",function(a){j.css({transition:"opacity 1s",opacity:""})});var i="ipad"==e?-16:"iphone"==e?-2:0,j=$('<canvas class="devices-reflection" />').insertAfter(this);j[0].setDimensions(f.offsetWidth,100,!1,!0),j.css({top:f.offsetTop+f.offsetHeight+i,left:f.offsetLeft,opacity:h?0:""});var k=j[0].getContext("2d"),l=k.createLinearGradient(0,0,0,100);l.addColorStop(0,"transparent"),l.addColorStop(1,"black"),k.makeGradient=function(){k.globalCompositeOperation="destination-out",k.style(l).fR(0,0,n.width,100).style("rgba(255,255,255,0.86)").fR(0,0,n.width,100)};var m=w.width>1170?1:0;w.width<=750&&(m=-1),$(window).on("resizeWidth",function(a){var b=w.width>1170?1:w.width<=750?-1:0;j.css("display",b==m?"":"none")});var n=new Image,o=this.querySelector("img");"ipad"==e&&(n.src="images/frames/ipad.png"),"iphone"==e&&(n.src="images/frames/iphone.png"),"custom"==e&&(n.src=o?o.src:this.src),n.onload=function(){return k.scale(1,-1),k.drawImage(this,0,-this.height-i),"custom"==e?d():void $(o).onImageReady(function(){$(o).centerImages();var a="ipad"==e?377:260,b="ipad"==e?283:147,c="ipad"==e?30:14,f="ipad"==e?42:40;this.width/b;k.drawFilledImage(o,c,f-n.height-i,b,a),d()})}}}})}function PersonsBlock(a){function b(a){var b=Math.round(a/o);return b=Math.max(0,Math.min(s-1,b))}function c(a){$.browser.mobile&&i.css("transition","1.1s"),d(o*a,1100,"ease"),q=a}function d(a,b,c){return 0>a&&(a/=2),a>t&&(a=t+(a-t)/2),$.browser.mobile&&(b=0),0===b?(i.css("transform3d","translateX("+-a+"px)"),void(z.pos=a)):void p.animate(a,b||700,{easing:c,step:function(a){z.pos=-a}})}this.container=a;var e=this,f=$(a),g=$("article",a),h=$(".togglers",a),i=$('<div class="movable-part" />').addClass("grab-cursor").append(g).insertBefore(h),j=$(a).prev().filter(".section-header"),k=j.outerHeight(!0)||0,l=f.height(),m=f.width(),n=parseInt(getComputedStyle(g[0]).marginRight,10),o=m+n,p=new MoveAnimation(i[0],!0),q=0,r=Math.ceil(m/296),s=Math.ceil(g.length/r),t=(s-1)*o,u=f.hasClass("no-blur");f.css("height",l),i.css("width",s*o),$(window).on("resizeWidth",function(a){var b=1170;w.width<1170&&(b=874),w.width<902&&(b=578),w.width<606&&(b=282),b!=m&&(m=b,o=m+n,r=Math.ceil(m/296),s=Math.ceil(g.length/r),t=(s-1)*o,c(0),v.setAmount(s),v.setActive(0))}),$.browser.mobile&&g.each(function(){var a,b=($(this),$(".info-hover",this).children());0===b.length&&$(".info-hover",this).append("<p />"),b.filter(".social-media").length&&(a=b.filter(".social-media")[0]),b.filter("p").length&&(a=b.filter("p")[0]),$('<div class="mobile-plus" />').on("click",function(a){var b=$(this).css("opacity");.5>b&&(a.stopPropagation(),a.preventDefault())}).insertAfter(a)}),g.each(function(b){function c(a,b,c,e){q.animate(a,b||700,{easing:c,complete:e,step:function(a){n.add(o).css("transform3d","translateY("+a+"px)"),d()}})}function d(a){if(a=a||0,w.drawFilledImage(x,0,0,r,t),!u){var b=78-q.node.pos;w.drawFilledImage(y,0,t-b,r,t,{x:0,y:t-b,w:r+a,h:b})}}var g=$(this),m=$(".preview",this),n=$(".info-hover",this),o=$(".info",this),p=m.children("img");if(0!==p.length){var q=new MoveAnimation({pos:0}),r=282,t=367,v=$('<canvas width="'+r+'" height="'+t+'" />').appendTo(m);v[0].setDimensions(r,t,!1,!0);var w=v[0].getContext("2d"),x=p[0],y=createCanvas(),z=!1;if(g.is('[class*="animation-"]')||f.is('[class*="animation-"]')){z=!0,d(-r),o.css("transform3d","translateX(-"+r+"px)").find("h5, .caption").css("opacity",0).css("transform","translateY(10px)");var A=g.is('[class*="animation-"]');$(A?g:f).one("animationCompleted",function(a){var c=A?0:380*b;$.browser.mobile&&b>=s&&(c=0),setTimeout(function(){singleAnimation({position:-r,duration:380,easing:"linear",step:function(a){d(a-r),o.css("transform3d","translateX("+(a-r)+"px)")},complete:function(){o.find("h5, .caption").css({transition:".7s .1s",transform:"",opacity:""}),z=!1}})},c)})}p.onImageReady(function(){if(p.remove(),u)return d(z?-a:0);var a=x.naturalWidth||x.width,b=x.naturalHeight||x.height;y.setDimensions(a,b),function(c){var d=createCanvas(a/4,b/4),e=d.getContext("2d");e.drawImage(x,0,0,d.width,d.height),stackBlurCanvasRGB(d,0,0,d.width,d.height,2),c.drawImage(d,0,0,a,b)}(y.getContext("2d")),d(z?-a:0)}),g.on("mouseenter mouseleave",function(a){if(!z&&!e.detailsPage){var b="mouseenter"==a.type||"mouseover"==a.type,d=b?n.outerHeight():0;c(d,700,"draggerRailEase",function(){$.support.transition?n.children().toggleClass("visible",b):n.children().stop().animate({opacity:b?1:0,top:b?0:15},b?600:1)})}}).on("click",function(b){function d(){0!=t&&0!=u&&(r.css("opacity",0).appendTo(a).css("marginTop",-k),s=r.outerHeight()-k,handleAppendedBlocks(r),r.find("img").onMultiImagesReady(m),r.find(".person-close").one("click",p))}function m(){r.find(".person-photo img").centerImages(),j.css("transition",".7s").addClass("animation-fadezoom"),f.css("height",s).transitEnd(function(){Scroll.resize(),i.add(h).hide(),r.css("opacity","").addClass("showed"),f.removeClass("hide-preview").addClass("hide-page").css("overflow","visible"),runApart(function(){j.removeClass("animation-fadezoom").addClass("animation-fadezoomout"),f.addClass("show-page").removeClass("hide-page").css("will-change","").addClass("opened"),$(window).on("resizeWidth.persons",n)})},"fn","opacity").addClass("hide-preview")}function n(){s=r.outerHeight()-k,f.css("height",s),r.find(".persons-photo img").centerImages()}function p(){$(window).off("resizeWidth.persons"),v.stop(),f.css("will-change","height, transform, opacity").transitEnd(function(){r.remove(),i.add(h).show(),f.addClass("hide-preview").removeClass("hide-page").removeClass("opened").css("overflow",""),runApart(function(){j.removeClass("animation-fadezoomout"),f.css("height",l).transitEnd(function(){f.removeClass("show-page"),Scroll.resize()},"fn","opacity").removeClass("hide-preview"),e.detailsPage=!1,c(0,800,"ease")})},"fn","opacity").addClass("hide-page")}$(b.target);if(!$.browser.mobile||$(b.target).hasClass("mobile-plus")!==!1){var q=$(this).data("url");if(q&&!e.detailsPage){e.detailsPage=!0;var r,s=null,t=!1,u=!1;$.ajax({cache:!0,url:q,dataType:"html"}).done(function(a){r=$(a).filter(".person-page"),d(t=!0)}).error(function(){});var v=new Preloader(g[0]);c(-o.outerHeight(),800,"ease",function(){f.css("will-change","height, transform, opacity"),v.start(function(){d(u=!0)})})}}})}});var v=new Togglers({elem:h,amount:s,handler:function(a){c(a)}});1==s&&i.removeClass("grab-cursor");var x,y,z=new TouchMove({elem:$(a),namespace:"persons",ondown:function(a,b){x=getTime(),y=b.target},onmove:function(a,b,c){$.browser.mobile&&i.css("transition",""),d(a,$.browser.mobile?0:200)},onup:function(a,d,e){return!$.browser.mobile&&getTime()-x<350&&Math.abs(d)<10?$(y).click():(c(b(-a)),v.setActive(q))}})}function BlogPostsBlock(a){function b(){n=a.offsetWidth,l=g.eq(0).outerWidth(!0),o=Math.ceil(n/l),k=g.length-o,m=k*l,$.browser.mobile&&h.css("transition",""),d(0)}function c(a){var b=Math.round(a/l);return b=Math.max(0,Math.min(k,b))}function d(a){e(l*a,1100,"ease"),j=a}function e(a,b,c){return 0>a&&(a/=2),a>m&&(a=m+(a-m)/2),$.browser.mobile&&(b=0),0===b?(q.pos=a,void h.css("transform3d","translateX("+-a+"px)")):void p.animate(a,b||700,{easing:c,step:function(a){q.pos=-a}})}this.container=a;var f=$(a),g=$("article",a),h=$('<div class="movable-part" />').addClass("grab-cursor").append(g).prependTo(a),i=f.hasClass("no-blur");g.each(function(a){function b(a,b,e,f){var g=!1;j.animate(a,b||700,{easing:e,complete:f,step:function(a){c(),-61.5>a&&!g&&(g=!0,d(30))}})}function c(){var a=-j.node.pos;n.drawFilledImage(o,0,0,k,l),n.save(),n.fillStyle=g.find("a").css("borderColor")||"rgba(255,255,255,0.1)",n.begin().arc(k/2,l/2,a,0,2*Math.PI,!0),i||(n.clip(),n.drawFilledImage(p,0,0,k,l)),n.fill(),n.restore()}function d(a,b){u.push({start:getTime(),x:k/2,y:l/2,radius:a,time:b||1500}),t&&e()}function e(){var a=s;a.clearCanvas(),t=!0,u.forEach(function(b,c){t=!1;var d=(getTime()-b.start)/b.time;d=Math.min(1,Math.max(0,d));var e=-d*(d-2);e=Math.min(1,Math.max(0,e)),a.lineWidth=1+e*(b.radius/6);var f=Math.max(0,Math.min(1,.15*(1-e)));.01>f&&(f=0);var g=63+b.radius*e*.6,h=a.lineWidth/2,i="transparent";try{i=a.createRadialGradient(b.x,b.y,g-h,b.x,b.y,g+h),i.addColorStop(0,"rgba(255,255,255,0)"),i.addColorStop(.5,"rgba(255,255,255,"+f+")"),i.addColorStop(1,"rgba(255,255,255,"+f/2+")")}catch(a){}a.strokeStyle=i,a.beginPath(),a.arc(b.x,b.y,63+b.radius*e*.6,0,2*Math.PI),a.stroke(),d>=1&&delete u[c]}),0==t&&requestAnimationFrame(e)}var f=$(this),g=$(".preview",this),h=g.children("img");if(0!==h.length){var j=new MoveAnimation({pos:0}),k=274,l=477,m=$('<canvas width="'+k+'" height="'+l+'" />').appendTo(g);m[0].setDimensions(k,l,!1,!0);var n=m[0].getContext("2d"),o=h[0],p=createCanvas();h.onImageReady(function(){if(h.remove(),i)return c();var a=o.naturalWidth||o.width,b=o.naturalHeight||o.height;p.setDimensions(a,b),function(c){var d=createCanvas(a/4,b/4),e=d.getContext("2d");e.drawImage(o,0,0,d.width,d.height),stackBlurCanvasRGB(d,0,0,d.width,d.height,2),c.drawImage(d,0,0,a,b)}(p.getContext("2d")),c()});var q=!1;f.on("mouseenter mouseleave",function(a){q=!1;var c="mouseenter"==a.type||"mouseover"==a.type;$(this).toggleClass("hover",c);var d=c?64:0;b(d,700,null,function(){c&&(q=!0)})}).on("mouseover",".preview a",function(){q&&(d(50,2200),setTimeout(d,125,30,2200))});var r=$('<canvas class="hover-bubbles" />').attr({width:k,height:l}).appendTo(g),s=r[0].getContext("2d"),t=!0,u=[]}}).on("mousedown touchstart","a",function(a){a.stopPropagation(),$.browser.mobile&&$(this).css("opacity")<.5&&($(this).trigger("mouseover"),a.preventDefault())}).on("click","h5",function(a){});var j,k,l,m,n,o,p=new MoveAnimation(h[0],!0),q=new TouchMove({elem:$(a),namespace:"blog",ondown:function(a,b){$.browser.mobile&&h.css("transition","")},onmove:function(a,b,c){e(a,200)},onup:function(a,b,e){$.browser.mobile&&h.css("transition",".7s"),d(c(-a))}});b(),$(window).on("resizeResponsive",b),h.css("width",g.length*l)}function ScrollableLogo(a){function b(){function b(){f=i.positions=[],h=a.offsetWidth,o=0,i.active=0,d.each(function(a){for(var b=a,c=a+1,e=j(a);c<d.length&&e+j(c)<h;)e+=j(c++);o+=j(b-1),$(this).data("fund",o);var g=0;if(f[0])for(var i=f.last().left;b>i;i++)g+=j(i);--c,f.last()&&f.last().right==c||f.push({left:b,right:c,padding:h-e,position:o,diff:g,point:[]})}),f.forEach(function(a,b){d.each(function(b){var c=$(this).data("fund")-a.position;b>a.right&&(c+=a.padding),b<=a.right&&b>=a.left&&(c+=a.padding/2),a.point[b]=c})}),k(0),i.static=1==f.length}function j(a){var b=d.eq(a).children("img")[0],c=i.options.paddingHalf;return(-1!=a&&b?b:{width:-c}).width+c}function k(a){for(var b=0;f[b]&&f[b].position<a;)b++;var c=f[b-1]||f[b],e=f[b]||f[b-1],g=c==e?1:(a-c.position)/e.diff;d.each(function(b){var d=g*(e.point[b]-c.point[b])+c.point[b];0>a&&(d-=a*i.options.slowerIndex),a>r&&(d-=(a-r)*i.options.slowerIndex),$(this).css("transform","translateX("+d+"px)")})}function l(a,b,c){return $.browser.mobile&&(b=0),0===b?k(a):void e.animate(a,b||700+Math.abs(e.node.pos-a)/5,{easing:c,step:function(a){k(-a)}})}function m(a){var b,c=1e9;return f.forEach(function(d,e){var f=Math.abs(d.position+a);f>c||(c=f,b=d.position,i.active=e)}),$.browser.mobile&&d.css("transition","1s"),l(b),b}function n(a){var b=f[i.active].position;s.pos=b,$.browser.mobile&&d.css("transition","1s"),l(b,a||1e3,"ease")}var o=0;if(b(),i.calculatePositions=b,1==f.length)return i.static=!0;i.hold=i.hover=!1,i.releaseTime=0;var p,q,r=f.last().position,s=i.touch=new TouchMove({elem:c,namespace:"clients",ondown:function(a,b){i.hold=!0,p=getTime(),q=b.target,$.browser.mobile&&d.css("transition","")},onmove:function(a,b,c){l(a,200)},onup:function(a,b,c){return i.hold=!1,i.releaseTime=getTime(),!$.browser.mobile&&getTime()-p<350&&Math.abs(b)<10?$(q).click():m(a)}});c.on("mouseover mouseout",function(a){i.hover="mouseover"==a.type,i.hover||(i.releaseTime=getTime())}),i.getElementWidth=j,i.setElementsPosition=k,i.animateElements=l,i.animateToClosest=m,i.animateToActive=n,g.executeFunctions()}var c=$(a).addClass("grab-cursor"),d=c.children(),e=this.anim=new MoveAnimation({pos:0}),f=[],g=[],h=a.offsetWidth,i=this;i.container=a,i.active=0,i.amount=d.length,i.positions=f,i.onReady=function(a){return f.length?a():void g.push(a)},d.find("img").onMultiImagesReady(b)}function StatsBlock(a){function b(){j=a.offsetWidth,k=Math.ceil(j/r),l=r*(k-1),m=q.length-k,n=m*r,p.length<k+1&&(i.static=!0),d(0),o.node.pos=0}function c(a){return slowIteration(a,15,.95)}function d(a){var b=(w.width-j)/2+r/2;a>0?a=c(a):-a>n&&(a=-n-c(-a-n)),s=a,q.each(function(c){var d=a+c*r,e=a;k>c&&a>0&&(d=0),c>=m&&-a>n&&(d=0),0>d?e+=-ease(-d/r,"ease-in")*b:Math.floor(d)>l?e+=ease((d-l)/r,"ease-in")*b:0==p[c].filled&&h(c),$(this).css("transform","translateX("+e+"px)")})}function e(a,b,c){return $.browser.mobile&&(b=0),0===b?(o.node.pos=-a,d(-a),a):(o.animate(a,b||700+Math.abs(o.node.pos-a)/5,{easing:c,step:function(a){d(a)}}),a)}function f(a){var b=600;return a>0?i.active=0:-a>n?i.active=m:(b=800,i.active=Math.round(-a/r)),e(i.active*r,b)}function g(){if(!i.ready){i.ready=!0;for(var a=Math.min(4,p.length),b=0;a>b;b++)p[b].filled=!0;singleAnimation({duration:1200,step:function(b){for(var c=0;a>c;c++)p[c].$number.text(Math.round(-b*p[c].num))}})}}function h(a){if(i.ready){var b=p[a];b.filled=!0,singleAnimation({duration:1e3,step:function(a){b.$number.text(Math.round(-a*b.num))}})}}this.container=a;var i=this;i.active=0;var j,k,l,m,n,o=i.anim=new MoveAnimation({pos:0}),p=[],q=$("article",a).each(function(a){var b={};b.$circle=$('<div class="stats-circle" />').appendTo(this),b.$number=$(".number",this),b.num=parseInt(b.$number.text(),10),b.filled=!1,p.push(b),b.$number.text("0")}),r=q[0].offsetWidth;b();var s=0;$(window).on("resizeWide",function(a){d(s)}),i.items=p,i.$items=q,i.fillInitial=g,i.fillCertain=h,i.animateElements=e,i.animateToClosest=f,i.setUpInitial=b}function SkillsBlock(a){if(!a.querySelector(".skills-track")){this.container=a;var b=$("article",a);b.each(function(){var a=parseInt($(this).data("percent"),10),b=($(this).children("p"),$('<div class="skills-track" />').appendTo(this)),c=$('<div class="skills-fill" />').css("width",a+"%").appendTo(b);$('<div class="skills-percent">'+a+"%</div>").appendTo(c)})}}function ContactForm(a){this.container=a;var b=$("input, textarea",a),c=$("a.cancel",a),d=$("a.submit",a);b.add(d).each(function(){var b=this.offsetTop+3,c=$(this).data("hint");if(!c)return void $(this).data("hint_element",$());var d=$('<div class="hint" style="top:'+b+'px;"><p class="text">'+c+'</span><div class="character"><i>!</i></div></div>');$(this).data("hint_element",d.prependTo(a))}),b=$('<input type="hidden" value="'+$(a).data("subject")+'" name="subject">').appendTo(a).add(b),d.on("click",function(a){var c=!0;b.each(function(){var a=$(this);return this.hasAttribute("required")&&""===a.val().trim()?(a.data("hint_element").addClass("pulse-hint"),a.addClass("pulse").focus().one("blur",function(){a.removeClass("pulse"),a.data("hint_element").removeClass("pulse-hint")}),c=!1,!1):void 0}),c&&$.ajax({url:"contact.php",method:"POST",data:b.serialize(),complete:function(a){var b=d.data("hint_element").css({opacity:1,marginLeft:30});b.children(".text").text(a.responseText),$(window).one("touchstart mousedown",function(a){b.css({opacity:0,marginLeft:50})})}})}),c.on("click",function(a){b.empty().trigger("blur").val("")}),b.on("focus blur",function(a){var b="focus"==a.type;b||$(this).toggleClass("has-text",!$(this).is(":empty")),$(this).data("hint_element").css({opacity:b?1:0,marginLeft:b?30:50})})}function GoogleMaps(a){this.container=a;var b=this,c=google.maps,d=$(a).data("style"),e=21,f=$(a).data("coords").split(","),g=new c.LatLng(+f[0],+f[1]),h=$.extend({center:g},b.mapOptions);h.styles=d?mapsScheme[d]:h.styles;var i=b.Map=new c.Map(a,h),j=$.extend({map:i,position:g},b.markerOptions);if(0==$(a).hasClass("no-marker")){b.Marker=new c.Marker(j)}!function(){var a=new c.DirectionsService;a.route({origin:g,destination:g,travelMode:c.TravelMode.DRIVING},function(a,c){b.miles=!!a.routes[0].legs[0].distance.text.match(/ft/g)})}();var k=this.scale={pos:0,add:function(a){return $(a).appendTo(this.$container)},init:function(){if(!$.browser.mobile){k.$container=$('<div class="scale-container"></div>');var c=new ElementVisibility(a);c.onshow(function(){k.$container.css("transform","none")},!0),this.$container.appendTo(a.parentNode),this.$track=this.add('<canvas width="21" height="184" class="scale-track"></canvas>'),this.$track[0].setDimensions(21,184,!1,!0),this.$thumb=this.add('<div class="scale-thumb"><span></span><div></div></div>');var d=this.$thumb.children("hr"),f=this.$thumb.children("span"),g=this.anim=new MoveAnimation(this.$thumb[0]);this.touch=new TouchMove({elem:this.$thumb,namespace:"map",vertical:!0,ondown:function(a,b){d.addClass("downed"),f.css("opacity",1).text(k.getScaleText(-a/184)),j.using=!0,j.timestamp=getTime(),j.saved=j.progress,j.render()},onmove:function(a,b,c){var d=Math.min(0,Math.max(-184,a));return g.animate(d,150,{step:function(a){k.pos=a;var b=-183>d?184:d>-1?0:-d;f.text(k.getScaleText(b/184))}}),d},onup:function(a,b,c){d.removeClass("downed"),f.css("opacity",0),j.using=!1,j.timestamp=getTime(),j.saved=j.progress,i.setZoom(Math.round(e*(1-a/184)))}});this.$track.on("click",this.changeZoom);var h=b.mapOptions.zoom;this.changeZoom(184*(1-h/e));for(var j=this.track,l=0;62>l;l++)j.stripes[l]={pos:3*l,width:7,potential:0,actual:0};j.render()}},track:{stripes:[],using:!1,progress:0,saved:0,timestamp:null,request:null,render:function a(){var b=k.$track[0].getContext("2d");b.clearCanvas();var c=Math.min(1,(getTime()-this.timestamp)/500);this.using?this.progress=this.saved+(1-this.saved)*c:this.progress=this.saved*(1-c),this.stripes.forEach(function(a){var c=Math.abs(a.pos-k.pos);if(c=c>1?c-1:0,c=Math.max(0,Math.min(1,1-.05*c)),c=Math.pow(c,5),a.potential=7*c,a.actual!=a.potential){var d=a.potential-a.actual;Math.abs(d)<1?a.actual=a.potential:a.actual+=d>0?1:-1}var e=a.width+this.progress*a.actual;b.fillRect(7,a.pos,e,1)}.bind(this)),cancelAnimationFrame(this.request||null),(0!=this.progress||0!=this.using)&&(this.request=requestAnimationFrame(a.bind(this),k.$track[0]))}},changeZoom:function(a){var b="number"==typeof a?a:a.offsetY;k.pos=b,k.touch.pos=-b,k.anim.animate(-b,500),i.setZoom(Math.round(e*(1-b/184)))},getScaleText:function(a){for(var c=[10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4,75e3,1e5,2e5,5e5,75e4,1e6,2e6,5e6,1e7],d=c.shift(),e=c.shift(),f=c.length,g=0;a*f>=++g;)d=e,e=c[g-1];var h=a-(g-1)/(f+1),i=d+h*f*(e-d);return b.miles?(i/=.3048,i>1e4?(i*=189394e-9,i=100>i?i.toFixed(1):i>>0,i>6050&&(i=6050),i+" mi"):(i>>0)+" ft"):i>1e4?(i*=.001,i=100>i?i.toFixed(1):i>>0,i+" km"):(i>>0)+" m"}};c.event.addListenerOnce(i,"idle",function(){var a=122;w.width<=612&&(a=0),function(a,b){var d=Math.pow(2,i.getZoom()),e=i.getProjection().fromLatLngToPoint(g),f=new c.Point(a/d||0,b/d||0),h=new c.Point(e.x-f.x,e.y+f.y);h=i.getProjection().fromPointToLatLng(h),i.setCenter(h)}(a,50),k.init()}),c.event.addListenerOnce(i,"tilesloaded",function(){function b(){if(0!=d.visible){var e=a.querySelector(".gmnoprint[title]"),f=$(e);c=setTimeout(b,2350),f.removeClass("pointer-pulsate"),setTimeout(function(){f.addClass("pointer-pulsate")},10)}}var c,d=new ElementVisibility(a,0);d.onshow(function(){clearTimeout(c),b()})})}function ScrollAnimation(a){var b=$(a).hasClass("post")?.35:void 0,c=new ElementVisibility(a,b),d=$(a).data("animation-delay")||100,e=$(a).data("animation-duration")||1e3,f=a.className.match(/animation-[\w-]*/);if(null!=f){f=f[0];var g=f.match(/animation-icons|animation-list|animation-skills|animation-contacts/);if(null===g){var i=a.style.transition;return $(a).css("transition",e+"ms "+d+"ms").css("will-change","transform, opacity"),void c.onshow(function(){$(a).removeClass(f).transitEnd(function(){a.style.transition=i,a.style.willChange="",$(a).trigger("animationCompleted")})},!0)}if(g=g[0],"animation-contacts"==f)$(a).addClass("hidden"),c.onshow(function(){if(!(w.width<=612)){$(a).closest(".contacts-block").addClass("opened");var b=$(a).children().css({transform:"translateY(20px)",opacity:0});$(a).css("transition",e+"ms "+d+"ms").transitEnd(function(){var a=e;b.css({transition:a+"ms",transform:"",opacity:""}),setTimeout(function(){
b.css("transition","")},a+20)}).removeClass("hidden")}},!0);else if("animation-skills"==f){var j=$(".skills-fill",a).addClass("unfilled"),k=$(".skills-percent",a).addClass("hidden");c.onshow(function(){j.each(function(a){var b=d+160*a-100;$(this).css("transition",e+"ms "+d+"ms").removeClass("unfilled"),k.eq(a).css("transition",e/2+"ms "+(b+e)+"ms").removeClass("hidden")})},!0)}else if("animation-list"==g){var l=$(".devices-dot",a).addClass("hidden"),m=$("article",a).css("opacity",0),n="animation-list-fadedown"==f?"animation-fadedown":"animation-fadeup";c.onshow(function(){m.each(function(a){if(this.savedTransition=this.style.transition,"animation-list-outofscreen"==f){var b=this.getBoundingClientRect(),c=b.left>h.width?200:-200;$(this).css("transform","translateX("+c+"px)"),$(this).css("opacity",0)}else $(this).addClass(n),$(this).css("opacity","");$(this).addClass("hide-lines")}),runApart(function(){m.each(function(a){var b=d+250*(m.length-a-1);$(this).css({transition:e+"ms "+b+"ms",transform:"",opacity:""}).removeClass(n)}).first().transitEnd(function(){m.each(function(){this.style.transition=this.savedTransition}),runApart(function(){m.addClass("animate-lines").removeClass("hide-lines")}),setTimeout(function(){l.addClass("animate-lines").removeClass("hidden")},615)})})},!0)}else if("animation-icons-outofscreen"==f){var m=$(a).children("article").css("opacity",0);c.onshow(function(){m.each(function(a){var b=this.getBoundingClientRect(),c=b.left>h.width?w.width-b.left:-b.right;c+=b.left>h.width?b.left-h.width:b.right-h.width,this.savedTransition=this.style.transition,$(this).css({transform:"translateX("+c+"px)",opacity:1})}),runApart(function(){m.each(function(a){a%=4;var b=0==a||3==a?150:0;b+=d,$(this).css({transition:e+"ms "+b+"ms",transform:""})}).last().transitEnd(function(){m.each(function(){this.style.transition=this.savedTransition})})})},!0)}else if("animation-icons"==g){var n="animation-icons-fadedown"==f?"animation-fadedown":"animation-fadeup",m=$(a).children("article");m.each(function(a){this.savedTransition=this.style.transition;var b=a*(e/4)+d;$(this).addClass(n).css("transition",e+"ms "+b+"ms")}),c.onshow(function(){m.removeClass(n).last().transitEnd(function(){m.each(function(){this.style.transition=this.savedTransition})})},!0)}}}function blogTagsUpdate(){$(".post-tags-list").each(function(){$(this).removeClass("drop-down").toggleClass("drop-down",this.scrollHeight>this.offsetHeight)})}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(a){function b(b){var c={},d=/^jQuery\d+$/;return a.each(b.attributes,function(a,b){b.specified&&!d.test(b.name)&&(c[b.name]=b.value)}),c}function c(b,c){var d=this,f=a(d);if(d.value==f.attr("placeholder")&&f.hasClass(m.customClass))if(f.data("placeholder-password")){if(f=f.hide().nextAll('input[type="password"]:first').show().attr("id",f.removeAttr("id").data("placeholder-id")),b===!0)return f[0].value=c;f.focus()}else d.value="",f.removeClass(m.customClass),d==e()&&d.select()}function d(){var d,e=this,f=a(e),g=this.id;if(""===e.value){if("password"===e.type){if(!f.data("placeholder-textinput")){try{d=f.clone().prop({type:"text"})}catch(c){d=a("<input>").attr(a.extend(b(this),{type:"text"}))}d.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",c),f.data({"placeholder-textinput":d,"placeholder-id":g}).before(d)}f=f.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",g).show()}f.addClass(m.customClass),f[0].value=f.attr("placeholder")}else f.removeClass(m.customClass)}function e(){try{return document.activeElement}catch(a){}}var f,g,h="[object OperaMini]"==Object.prototype.toString.call(window.operamini),i="placeholder"in document.createElement("input")&&!h,j="placeholder"in document.createElement("textarea")&&!h,k=a.valHooks,l=a.propHooks;if(i&&j)g=a.fn.placeholder=function(){return this},g.input=g.textarea=!0;else{var m={};g=a.fn.placeholder=function(b){var e={customClass:"placeholder"};m=a.extend({},e,b);var f=this;return f.filter((i?"textarea":":input")+"[placeholder]").not("."+m.customClass).bind({"focus.placeholder":c,"blur.placeholder":d}).data("placeholder-enabled",!0).trigger("blur.placeholder"),f},g.input=i,g.textarea=j,f={get:function(b){var c=a(b),d=c.data("placeholder-password");return d?d[0].value:c.data("placeholder-enabled")&&c.hasClass(m.customClass)?"":b.value},set:function(b,f){var g=a(b),h=g.data("placeholder-password");return h?h[0].value=f:g.data("placeholder-enabled")?(""===f?(b.value=f,b!=e()&&d.call(b)):g.hasClass(m.customClass)?c.call(b,!0,f)||(b.value=f):b.value=f,g):b.value=f}},i||(k.input=f,l.value=f),j||(k.textarea=f,l.value=f),a(function(){a(document).delegate("form","submit.placeholder",function(){var b=a("."+m.customClass,this).each(c);setTimeout(function(){b.each(d)},10)})}),a(window).bind("beforeunload.placeholder",function(){a("."+m.customClass).each(function(){this.value=""})})}}),Array.prototype.last=function(){return this instanceof Array?this[this.length-1]:null},Array.prototype.executeFunctions=function(){return this.forEach(function(a){"function"==typeof a&&a()})},HTMLImageElement.prototype.checkTaint=function(){this.tainted=void 0===this.tainted?!0:this.tainted;var a=createCanvas(1,1);a.context.drawImage(this,0,0);try{a.context.getImageData(0,0,1,1);this.tainted=!1}catch(a){return 18==a.code}},HTMLImageElement.prototype.fakeLoad=function(){this.src=this.fakeSrc},$.fn.fakeLoad=function(){this.each(function(){this.fakeLoad&&this.fakeLoad()})},$.fn.onImageReady=function(a){var b=this[0];if(b.fakeSrc)b.fakeSrc===b.src&&b.complete?a.call(b):$(b).on("load",a);else{if(b.complete)return a.call(b);$(b).on("load",a),$.browser.donkeyNine&&(b.src=$(b).attr("src"))}},$.fn.onMultiImagesReady=function(a){var b=this,c=0;b.each(function(){$(this).onImageReady(function(){++c==b.length&&a()})})},$.fn.centerImages=function(a,b){this.each(function(c){var d=this;$(d).onImageReady(function(){var c=d.naturalWidth||d.offsetWidth,e=d.naturalHeight||d.offsetHeight;if(d.offsetParent){a=a||d.offsetParent.offsetWidth,b=b||d.offsetParent.offsetHeight;var f=c/e>a/b,g=f?e/b:c/a,h=.5,i=.5;d.crop&&(h=(+d.crop[1]+1)/2,i=(+d.crop[0]+1)/2);var j={width:f?"auto":"100%",height:f?"100%":"auto",marginTop:f?0:(b-e/g)*h,marginLeft:f?(a-c/g)*i:0};c/e===a/b&&(j.marginTop="",j.marginLeft=""),$(d).css(j)}})})},$.fn.getOffsetTop=function(){return getOffsetTop(this[0])},$.fn.exclusiveClick=function(){return $(this).on("mousedown",function(a){a.stopPropagation()})};var stylesheet=document.createElement("style");stylesheet.saved=0,document.head.appendChild(stylesheet),window.ws={width:0,height:0},$(window).on("resize",function(){window.w={width:$(window).width(),height:$(window).height()},window.h={width:w.width/2,height:w.height/2},(w.width!=ws.width||w.height!=ws.height)&&(w.width!=ws.width&&$(window).trigger("resizeWidth"),w.height!=ws.height&&$(window).trigger("resizeHeight"),$(window).trigger("resizeEvent"),ws=w)}).trigger("resize").on("resizeEvent",function(a){return ws.width>=1170&&w.width>=1170?$(window).trigger("resizeWide"):void(ws.width!==w.width&&$(window).trigger("resizeResponsive"))}),$.browser={webkit:/WebKit/i.test(navigator.userAgent),mobile:/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),donkey:/Trident/.test(navigator.userAgent),donkeyTen:/MSIE 10/.test(navigator.userAgent),donkeyNine:/MSIE 9/.test(navigator.userAgent)},$.platform={mac:navigator.platform.toLowerCase().indexOf("mac")>-1};var pt=document.documentElement.style;$.extend($.support,{transform3d:!!prefixMethod(pt,"TransformOriginZ"),transition:prefixMethod(pt,"Transition"),transform:prefixMethod(pt,"Transform"),flexBoxNew:!!prefixMethod(pt,"FlexBasis"),flexBoxOld:!!prefixMethod(pt,"BoxDirection"),flexBoxStupid:!!prefixMethod(pt,"FlexAlign"),transitionEnd:"transitionend webkitTransitionEnd otransitionend"}),location.origin||(location.origin=location.protocol+"//"+location.host),$.browser.mobile&&$(document.body).addClass("mobile"),$.browser.donkey&&$(document.body).addClass("browser-ie"),$.support.transition||$(document.body).addClass("no-transition"),$.support.flexBox=$.support.flexBoxNew||$.support.flexBoxOld||$.support.flexBoxStupid||!1,$.support.flexBox||$(document.body).addClass("no-flexbox"),$.support.pointerEvents=$.browser.donkeyNine||$.browser.donkeyTen?!1:"pointer-events"in document.documentElement.style,0==$.support.pointerEvents&&$(document.body).addClass("no-pointer-events");var Fullscreen={request:function(a){return a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():!1},check:function(){return document.fullscreenElement&&null!==document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen},cancel:function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}};window.canRequestAnimationFrame=!!prefixMethod(window,"RequestAnimationFrame",!0),window.requestAnimationFrame=prefixMethod(window,"RequestAnimationFrame",!0)||function(a){return setTimeout(a,.01)},window.cancelAnimationFrame=prefixMethod(window,"CancelAnimationFrame",!0)||prefixMethod(window,"CancelRequestAnimationFrame",!0)||function(a){return clearTimeout(a)},$.fn.getTranslate=function(){var a=$(this).css("transform");if("none"==a)return{X:0,Y:0};var b="3d"==a.substr(6,2);return a=a.split(/(\)|\()/)[2].split(","),{X:b?+a[12]:+a[4],Y:b?+a[13]:+a[5]}},$.cssHooks.transform3d={get:function(a,b,c){return $(a).css("transform")},set:function(a,b){a.style[$.support.transform]=b+($.browser.webkit?" translateZ(0)":"")}},$.fn.cssAnim=function(a,b){return $.support.transition?this.css(a):void this.stop().animate(a,b||500)},$.fn.anim=function(a,b,c){"number"==typeof a&&(a={value:a,duration:b,step:c});var d={};d[a.property||"borderSpacing"]=a.value;var e={duration:a.duration||500,step:a.step};$(this).stop().animate(d,e)},$.fn.transitOff=function(){var a=this,b=$.support.transitionEnd;return b.split(" ").forEach(function(b){a.off(b)}),a},$.fn.transitEnd=function(a,b,c,d){if(!$.support.transition)return setTimeout(function(){a.call(this)}.bind(this),20),this;b=b||"fn";var e=this,f=$.support.transitionEnd;return this.off(f).on(f,function(b){(d||b.originalEvent.target==e[0])&&(c&&b.originalEvent.propertyName!=c||($(this).off(f),a.call(this)))})};var MoveAnimation=function(a,b){function c(){j=getTime()-e,d(),j>f&&(f=j+k-(j-f),j+1>f&&(f=j+1)),f<l.duration&&(i.updateData=requestAnimationFrame(c)),f>l.duration&&(f=l.duration,i.updateData=requestAnimationFrame(d))}function d(){var c=-MoveAnimation.easing[l.options.easing||"mcsEaseOut"](f,g,h,l.duration);if(l.options.modifyValue&&(c=l.options.modifyValue(c)),l.options.disableSubpixelsOnIdle&&f>=l.duration&&(c=Math.round(c)),m)a.pos=c;else{var d=l.options.useZ?"transform3d":"transform";i.usePhysical?$(a).css(b?"left":"top",c):$(a).css(d,"translate"+(b?"X":"Y")+"("+c+"px)")}l.options.step&&l.options.step(c,f/l.duration);var e=l.options.dontRound?f>=l.duration:l.value==-Math.round(c);l.options.complete&&e&&(i.clear,f=l.duration,l.options.complete())}var e,f,g,h,i=this,j=0,k=1e3/60,l={};i.node=a;var m=a.hasOwnProperty("pos");i.isHorizontal=b,i.clear=function(){null!==i.updateData&&(window[canRequestAnimationFrame?"cancelAnimationFrame":"clearTimeout"](i.updateData),i.updateData=null)},i.getCurrentValue=function(){return m?a.pos:i.usePhysical?a[b?"offsetLeft":"offsetTop"]():$(a).getTranslate()[b?"X":"Y"]},i.animate=function(a,b,d){i.clear(),l.value=a,l.duration=b,l.options=d||{},j=0,f=k,e=getTime(),g=-i.getCurrentValue(),h=a-g,i.updateData=requestAnimationFrame(c)}};MoveAnimation.easing={linear:function(a,b,c,d){return c*a/d+b},easeOutCirc:function(a,b,c,d){return a/=d,a--,c*Math.sqrt(1-a*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},mcsEaseOut:function(a,b,c,d){var e=(a/=d)*a,f=e*a;return b+c*(.499999999999997*f*e+-2.5*e*e+5.5*f+-6.5*e+4*a)},draggerRailEase:function(a,b,c,d){return a/=d/2,1>a?c/2*a*a*a+b:(a-=2,c/2*(a*a*a+2)+b)},elastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin((a*d-e)*(2*Math.PI)/f)+c+b},back:function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},ease:bezierEasing([.25,.1,.25,1]),"ease-in":bezierEasing([.42,0,1,1]),"ease-out":bezierEasing([0,0,.58,1]),backBezier:bezierEasing([.42,0,.22,1.2])},$.support.transition||($.easing.swing=$.easing["bez_0p25,0p1,0p25,1"]);var CanvasProto=HTMLCanvasElement.prototype,CanvasContextProto=CanvasRenderingContext2D.prototype,dPR=function(){var a=document.createElement("canvas").getContext("2d"),b=a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return Math.max((window.devicePixelRatio||1)/b,1)}();CanvasContextProto.ratio=1,CanvasContextProto.clearCanvas=function(){return handleContext.call(this,"clearRect",0,0,this.canvas.width,this.canvas.height)},CanvasContextProto.R=function(a,b,c,d){return handleContext.call(this,"rect",a,b,c||1,d||1)},CanvasContextProto.fR=function(a,b,c,d){return handleContext.call(this,"fillRect",a,b,c||1,d||1)},CanvasContextProto.cR=function(a,b,c,d){return handleContext.call(this,"clearRect",a,b,c||1,d||1)},CanvasContextProto.move=function(a,b){return handleContext.call(this,"moveTo",a,b)},CanvasContextProto.line=function(a,b){return handleContext.call(this,"lineTo",a,b)},CanvasContextProto.trans=function(a,b){return handleContext.call(this,"translate",a,b)},CanvasContextProto.bezier=function(a,b,c,d,e,f){return handleContext.call(this,"bezierCurveTo",a,b,c,d,e,f)},CanvasContextProto.begin=function(){return this.beginPath(),this},CanvasContextProto.close=function(){return this.closePath(),this},CanvasContextProto.style=function(a,b){return this[(b||"fill")+"Style"]=a||"black",this},CanvasContextProto.drawArc=function(a,b,c,d){return this.begin().arc(a,b,c,0,2*Math.PI,!0),this.close()[d?"fill":"stroke"](),this},CanvasContextProto.text=function(a,b,c){return this.fillText(a,b,c),this},CanvasContextProto.drawFilledImage=function(a,b,c,d,e,f){var g=a.naturalWidth||a.videoWidth||a.width||a.offsetWidth,h=a.naturalHeight||a.videoHeight||a.height||a.offsetHeight,i=g/h>d/e;if(i)var j=h,k=h/g/(e/d)*g;else var k=g,j=g/h/(d/e)*h;var l=-(k-g)/2,m=-(j-h)/2;a.crop&&(l*=+a.crop[0]+1,m*=+a.crop[1]+1),f&&(l+=f.x*(k/d),m+=f.y*(j/e),k*=f.w/d,j*=f.h/e,d=f.w,e=f.h);try{this.drawImage(a,l,m,k,j,b,c,d,e)}catch(a){}return this},CanvasContextProto.disableSmooth=function(){this.imageSmoothingEnabled=!1,this.msImageSmoothingEnabled=!1,this.mozImageSmoothingEnabled=!1,this.webkitImageSmoothingEnabled=!1},CanvasProto.setDimensions=function(a,b,c,d){var e,f,g;c=c||!0,e=this.getContext("2d"),c&&(f=e.fillStyle,g=e.strokeStyle),e.retina=this.retina=!!d,a&&(this.style.width=a+"px",d&&(a*=dPR),this.width=a),b&&(this.style.height=b+"px",d&&(b*=dPR),this.height=b),d&&e.scale(dPR,dPR),e.scale(e.ratio,e.ratio),c&&(e=this.getContext("2d"),e.fillStyle=f,e.strokeStyle=g)},CanvasProto.setIconDimensions=function(a,b,c){var d=this.getContext("2d"),e=parseInt(getComputedStyle(this).fontSize),f=d.ratio=e/b;a=Math.ceil(a*f),b=Math.ceil(b*f),this.setDimensions(a,b,c,!0),this.parentNode.style.width=a+"px",this.parentNode.style.height=b+"px"};var mapsScheme={dark:[{featureType:"all",elementType:"all",stylers:[{saturation:-100},{gamma:.2},{lightness:-60}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#666666"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#353535"}]},{featureType:"poi",elementType:"geometry.stroke",stylers:[{color:"#808080"}]}],light:[{stylers:[{saturation:-100},{lightness:25},{gamma:.85}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]}]};VideoPlayer.prototype={aspectRatio:16/9},VideoPlayer.timeToString=function(a){var b=Math.floor(a/60);b=10>b?"0"+b:b;var c=Math.floor(a-60*b);c=10>c?"0"+c:c;var d=b+":"+c;return d};var canPlayMPEG,canPlayOGG,canPlayWebM;!function(){var a=document.createElement("video");canPlayMPEG=""!=a.canPlayType("video/mpeg"),canPlayWebM=""!=a.canPlayType("video/webm"),canPlayOGG=""!=a.canPlayType("video/ogg")}();var YOUTUBE_VARS={controls:0,showinfo:0,modestbranding:1,wmode:"opaque",html5:1,rel:0,iv_load_policy:3,origin:location.origin},YoutubeAPILoaded=!1;appendScript("//www.youtube.com/iframe_api"),$(".video").each(function(a){var b=$(this).data();b.width&&$(this).css("width",b.width),b.height&&$(this).css("height",b.height)});var page=$(".page")[0],$thumb=$("body > .thumb"),$parallax=$(".parallax-item"),$background=$("body > .background"),$overlay=$(".grab-overlay");if($.browser.mobile&&$overlay.remove(),window.devicePixelRatio>1&&$(".\\@1.5x-available, .\\@2x-available, .\\@3x-available").each(function(a){this.hasAttribute("height")===!1&&this.hasAttribute("width")===!1&&this.naturalHeight>0&&this.naturalWidth>0&&(this.height=this.naturalHeight,this.width=this.naturalWidth);var b=0;if($(this).hasClass("@1.5x-available")&&(b=1.5),$(this).hasClass("@2x-available")&&(devicePixelRatio>=2||0==b)&&(b=2),$(this).hasClass("@3x-available")&&(devicePixelRatio>=3||0==b)&&(b=3),0===b)return"WTF";var c=this.src,d=c.lastIndexOf(".");this.src=c.substr(0,d)+"@"+b+"x"+c.substr(d)}),$(document.body).hasClass("no-click-sound")===!1){var Click=new Audio;Click.src="media/click.mp3",Click.load(),Click.volume=.25,Click.elements="a, .social-media li, .icons canvas, .slide-down-button",$(document).on("mouseenter",Click.elements,function(){Click.currentTime=0,Click.play()})}$("input, textarea").placeholder(),$.support.transition||$('[class*="animation-"]').each(function(){var a=this.className.match(/animation-[\w-]*/)[0];$(this).removeClass(a)}),$.support.flexBox||($(".flex-blocks").each(function(){var a=this.offsetWidth,b=0,c=$("> div, > article",this),d=$(".block-rest",this);c.not(d).each(function(){b+=$(this).outerWidth(!0)}),b-=6*(d.length-1),d.each(function(){$(this).css("width",(a-b)/d.length)})}),$(".footer-block").each(function(){var a=1170,b=0,c=$(".column",this).each(function(){b+=$(this).outerWidth()}),d=(a-b)/(c.length-1);c.not(":last").css("marginRight",d)}),$(".post-tags").each(function(a){var b=$(".share-block",this),c=b.outerWidth()||0;$("> p",this).css("width",$(this).width()-c-22)})),TouchBubbles.prototype={baseRadius:0,interval:4e3,linesNum:5,radius:100,fadeDuration:$.browser.mobile?100:500};var Menu={SLIDE_WIDTH:207,open:!1,$container:$(".menu"),$nav:$(".menu nav"),$sections:$("section[data-name]"),$anchors:$(),setActive:function(a){this.$container.find(".active").removeClass("active"),0>a||this.$anchors.eq(a).addClass("active")},resetMenu:function(){$(window).one("resizeEvent",this.resetMenu.bind(this)),this.vertical=w.width<=965;var a=this.vertical&&this.$container.height()>w.height?"absolute":"fixed";this.$container.css("position",a),this.open||(Menu.$container.addClass("resizable").css({left:"",top:""}),$.support.transition?this.vertical?this.$anchors.css("transform3d","translateY(-70px)").css("opacity",0):this.$anchors.css("transform3d","translateX(-"+Menu.SLIDE_WIDTH+"px)"):this.vertical?this.$anchors.css("top",-40).css("left","").css("opacity",""):this.$anchors.css("left",-Menu.SLIDE_WIDTH).css("top",""))},init:function(){this.$anchors=this.$nav.find("a").on("click",function(a){this.href===location.href&&$(window).triggerHandler("hashchange")}),this.resetMenu(),this.$container.on("mouseenter",function(a){if(!Menu.touched){if(Menu.open=!0,Scroll.disabled=!0,$.support.transition)Menu.$container.transitOff().removeClass("resizable"),runApart(function(){Menu.$container.addClass("showed")});else{var b=Menu.vertical?{top:this.offsetHeight}:{left:this.offsetWidth};Menu.$container.stop(!0).animate(b,700)}Menu.$anchors.each(function(a){var b=Menu.vertical?100+50*(Menu.$anchors.length-a):100+50*a;$(this).stop(!0).delay(b).queue(function(){$.support.transition?$(this).css("transform3d","").css("opacity","").dequeue():$(this).animate({left:0,top:0},500).dequeue()})});var c=-1,d=0;Menu.$anchors.each(function(a){if(this.href.replace(/#.*/,"")==location.href.replace(/#.*/,"")){-1==c&&(c=0);var b=this.href.match(/#.*/);if(null==b)return c=a;b=b[0].substr(1);var e=Menu.$sections.filter('[data-name="'+b+'"]').getOffsetTop();e<=Scroll.position+.2*w.height&&e>d&&(c=a,d=e)}}),Menu.setActive(c)}}).on("mouseleave",function(a){function b(){Menu.open=!1,Menu.$anchors.stop(!0).css({left:"",transition:"none"}),Menu.resetMenu(),runApart(function(){Menu.$anchors.css("transition","")})}if(Scroll.disabled=!1,$.support.transition)Menu.$container.transitEnd(b).removeClass("showed");else{var c=Menu.vertical?{top:50}:{left:50};Menu.$container.stop(!0).animate(c,700,b)}}).on("touchstart",function(a){var b=a.originalEvent.touches;if(void 0!==b[0]){var c=$(a.target);if(!c.closest(".menu-inner").length){Menu.touched=!0,Menu.$container.addClass("resizable"),a.preventDefault();var d=Menu.vertical?"Y":"X",e=getTime(),f=b[0]["page"+d],g=Menu.$container.getTranslate()[d],h=g,i=-Menu.$container[Menu.vertical?"height":"width"]()-50;$(window).on("touchmove.menu",function(a){var b=a.originalEvent.touches,c=b[0]["page"+d]-f;h=Math.min(-50,Math.max(g+c,i)),Menu.$container.css("transform","translate"+d+"("+h+"px)")}).one("touchend",function(a){var b=(h+50)/(i+50),c=function(){return Menu.open?b>.4?!1:!0:b>.6?!1:!0}(),d=getTime()-e<400&&Math.abs(g-h)<15;d&&(c=!Menu.open),Menu.touched=!1,Menu.$container.removeClass("resizable").toggleClass("showed",c).css("transform","").trigger(c?"mouseenter":"mouseleave"),$(window).off("touchmove.menu")})}}})}};Menu.init(),$(window).one("pageReady",function(a){Scroll.disabled=!1,setTimeout(function(){if($.support.transition)Menu.$container.removeClass("resizable").addClass("ready").transitEnd(function(){$(this).addClass("resizable")});else{var a=Menu.vertical?{top:50}:{left:50};Menu.$container.animate(a,700,"bez_0p25,0p1,0p25,1",function(){$(this).css({top:"",left:""}).addClass("ready")})}},700)}),$(window).on("hashchange",handleHash).one("pageReady",handleHash);var pageReady=!1,Loader={$loader:$(".page-preloader"),loaded:0,items:[],anim:new MoveAnimation({pos:0}),init:function(){var a=(this.variation=parseInt(this.$loader.data("preloader"),10),this.canvas=createCanvas(w.width,w.height,!0));this.$loader.append(a),this.$text=this.$loader.children("p"),this.bgColor=this.$loader.css("backgroundColor"),this.$text.addClass("shown"),this.update(),$(window).on("resizeEvent",this.update.bind(this))},update:function(){this.canvas.setDimensions(w.width,w.height,!1,!0);var a=24,b=this.canvas.getContext("2d");b.font="200 "+a+"px "+this.$loader.css("fontFamily"),b.textAlign="center",b.textBaseline="top",this.render(0)},load:function(a){function b(){function a(){c.$loader.hide(),pageReady=!0,$(window).trigger("pageReady")}Scroll.resize(),$(window).trigger("pagePrepare"),c.$loader.css("transition","none"),$.support.transition?(c.$text.removeClass("shown"),c.$loader.css({transition:"opacity .9s",opacity:0}).transitEnd(a)):c.$loader.animate({opacity:0},{duration:900,complete:function(){c.$text.removeClass("shown"),a()}})}document.body.scrollTop=0,document.body.parentNode.scrollTop=0;var c=this,d=++this.loaded/this.items.length,e=1500*(1+this.anim.node.pos);return 2==this.variation?void(d>=1&&b()):void this.anim.animate(d,e,{easing:"draggerRailEase",dontRound:!0,step:function(a){c.render(-a)},complete:function(){1>d||b()}})},leave:function(a){this.$loader.css({transition:"opacity .65s",background:"#1e1e1e",opacity:0,display:"block"}),this.render(0),setTimeout(function(){$(window).trigger("pageLeave"),$.support.transition?this.$loader.css({opacity:1}).transitEnd(function(){location.href=a}):this.$loader.stop().animate({opacity:1},700,function(){location.href=a}),1==this.variation||2==this.variation}.bind(this),20)},render:function(a){var b=this.canvas.getContext("2d");if(b.clearCanvas(),1==this.variation)a>0&&b.style("white").fR(0,Math.floor(h.height)-1,w.width*a,2);else if(3==this.variation){var c=this.$text.innerWidth();a>0&&b.style("white").fR(h.width-c/2,Math.floor(h.height)-1,c*a,1);var d=Math.round(100*a);pageReady||b.style("white").text(d+"%",h.width,h.height+8)}}};Loader.init(),LoaderItem.prototype={timeout:9e3,ready:!1,done:function(a){this.ready||(this.ready=!0,Loader.load(this),a&&console&&console.log&&console.log(this.name))}};var fake=new LoaderItem("fake");setTimeout(function(){fake.done()},800),$("a").on("click",function(a){a.isDefaultPrevented()||1==a.which&&this.href&&!isExternal(this.href)&&this.href.replace(/#.*/,"")!=location.href.replace(/#.*/,"")&&"_blank"!=this.target&&"blank"!=this.target&&(a.preventDefault(),Loader.leave(this.href))});var useScrollTop=$.browser.donkey,useBrowserScroll=$.browser.mobile||$.platform.mac||$(document.body).hasClass("no-custom-scroll"),Scroll={EDGE:499,disabled:!0,position:0,anim:new MoveAnimation({pos:0}),step:function(a){$(page).on("scrolling",function(b,c){a(-c)})},to:function(a,b,c){this.position=a,this.scrollMove(b,c)},scrollMove:function(a,b){return useBrowserScroll?void $(document.body).stop().animate({scrollTop:this.position},{duration:a||800,complete:function(){$(page).trigger("scrollingOver")}}):(clearTimeout(this.timer),$thumb.stop(!0).animate({opacity:1},70).delay(800).animate({opacity:0},600),this.position<0?(this.position=.5*this.position,this.timer=setTimeout(function(){Scroll.to(0)},50)):this.position>this.available&&(this.position=this.available+.5*(this.position-this.available),this.timer=setTimeout(function(){Scroll.to(Scroll.available)},50)),void this.anim.animate(this.position,a||800,{dontRound:!0,disableSubpixelsOnIdle:!0,easing:b||null,complete:function(){$(page).trigger("scrollingOver")},step:function(a){if(pageReady&&$(page).trigger("scrolling",[a]),a>0)var b=0,c=1-a/Scroll.EDGE,d=Math.min(1,a/70);else-a>Scroll.available?(c=1-(-a-Scroll.available)/Scroll.EDGE,b=Scroll.thumbAvailable+(1-c)*Scroll.thumbHeight,d=Math.min(1,(a+Scroll.available)/-70)):(b=-a/Scroll.available*Scroll.thumbAvailable,c=1,d=0);if($thumb.css({backgroundColor:"rgba("+(255*d>>0)+","+(205*d>>0)+",0,"+(.55+.45*d)+")",transform3d:"translateY("+b+"px)",height:Scroll.thumbHeight*c}),useScrollTop){var e=document.body;if(e=$.browser.webkit?e:e.parentNode,e.scrollTop=-a,a>0){var f=$(page).children(":first");f.hasClass("main")===!1&&(f=$(page)),f.css("transform","translateY("+a+"px)")}else if(-a>Scroll.available){var g=Scroll.available+a;$(page).css("transform","translateY("+g+"px)")}}else $(page).css("transform","translateY("+a+"px)")}}))},resize:function a(){if(clearTimeout(this.resizeTimer),!$(page).is(":hidden")){this.resizeTimer=setTimeout(function(){a.call(Scroll)},1e3);var b=page.scrollHeight;if(0!==b&&(b-=400,!this.pageHeight||this.pageHeight!=b)){if(this.pageHeight=b,this.available=b-w.height,useBrowserScroll)return void(this.position=document.body.parentNode.scrollTop);this.thumbHeight=w.height/b*w.height,this.thumbAvailable=w.height-this.thumbHeight,$thumb.css("height",this.thumbHeight);var c=this.position;this.position>this.available&&(this.position=this.available),this.position!=c&&this.scrollMove()}}}};useBrowserScroll?$(window).on("pagePrepare",function(){$(document.body.parentNode).addClass("browser-scroll").css("overflow-y","visible")}).on("scroll",function(a){var b=$(this).scrollTop();Scroll.position=b,$(page).trigger("scrolling",[-b])}):(useScrollTop&&$(window).on("pagePrepare",function(){$(document.body.parentNode).addClass("browser-scroll")}),function a(){$(window).on("keydown",function(b){if(!Scroll.disabled){var c=40==b.keyCode;if(c||38==b.keyCode){var d=getTime(),e=setInterval(function(){Scroll.position+=c?20:-20,Scroll.scrollMove()},1e3/60);$(window).off("keydown").one("keyup",function(b){clearInterval(e),a(),getTime()-d>250||(Scroll.position+=c?150:-150,Scroll.scrollMove())})}}})}(),$(window).on("keydown",function(a){32!=a.keyCode||Scroll.disabled||"true"!=a.target.contentEditable&&("value"in a.target||(Scroll.position+=a.shiftKey?-w.height:w.height,Scroll.scrollMove()))}).on("mousewheel DOMMouseScroll",function(a){if(!Scroll.disabled){var b=a.originalEvent;Scroll.position+=b.wheelDelta/-1.6||25*b.detail,Scroll.scrollMove(),a.preventDefault()}}).on("resizeEvent.scroll",Scroll.resize.bind(Scroll))),$parallax.each(function(){function a(){if(1===j.children(":not(.parallax-item)").length)g=c(),j.css("height",g),j.css("lineHeight",g+"px");else{var a=c(!0);g=Math.max(a[0],a[1]);var b=(g-a[1])/2;j.css({height:a[1],padding:b+"px 0"})}}function b(a){if(!$.browser.mobile){var b=q.parentNode.offsetTop,c=.5*(b-a)-b+a;if(a+w.height>b&&b+r>a){$(q).css("transform3d","translateY("+c+"px)");var d=o?.5:0,e=b-a;e+g>w.height?d+=.5*(1-(w.height-e)/g):0>e&&(d+=.5*Math.abs(e/g)),l||s.css("opacity",d),q.video&&"idle"==q.video.state&&(q.video.setLoop(!0),$(q).one("playing",function(){q.video.volume(0)})),q.video&&0==$(q).hasClass("playing")&&q.video.play()}else $(q).hasClass("playing")&&q.video.pause()}}function c(a){var b=j.data("height")||j.outerHeight(!0)||580,c=0;return $(i).siblings(":not(canvas,.darker)").each(function(){c+=$(this).outerHeight(!0)}),k&&(b=572),a?[b,c]:Math.max(b,c)}function d(){var a=p,b=g>h.height?g+(w.height-g)*(a-1):h.height*a,c=Math.max(g,w.height);return Math.min(c,b)}function e(){var e=c();e!=g&&($.support.flexBox?(g=e,j.css("height",g)):a()),i?(i.setDimensions(w.width,g,!1,!0),f(Scroll.position,$.browser.mobile)):($(q).css("height",d()),b(Scroll.position))}function f(a,b){isNaN(+a)&&(a=Scroll.position);var c=j[0].offsetTop;if(b||!(a+w.height<c||a>c+g)){var e=d();g>w.height&&(e=g);var f=.5*(c-a)-c+a;if(b&&(f=0),k?(u.drawFilledImage(v,0,f,w.width,e),u.save(),u.begin().rect(0,g,w.width,-z),
u.clip(),u.drawFilledImage(B,0,f,w.width,e),u.restore()):u.drawFilledImage(v,0,f,w.width,e),(m||n)&&(u.fillStyle=n?parallaxPatternDark:parallaxPatternWhite,u.fillRect(0,0,i.width,i.height)),!l){var h=o?.5:0;if(!b){var p=c-a;p+g>w.height?h+=.5*(1-(w.height-p)/g):0>p&&(h+=.5*Math.abs(p/g))}u.fillStyle="rgba(0,0,0,"+h+")",u.fillRect(0,0,w.width,g)}}}var g,i="CANVAS"==this.tagName?this:null,j=$(this).parent();$.support.flexBox?(g=c(),j.css("height",g)):a();var k=j.hasClass("blog-header"),l=$(this).hasClass("no-fading"),m=$(this).hasClass("white-pattern"),n=$(this).hasClass("dark-pattern"),o=j.hasClass("parallax-block"),p=1.5;if(!i){var q=this,r=d();if($(q).css("height",r),$(q).hasClass("video")&&$(q).addClass("no-controls spreaded"),!l)var s=$('<hr class="darker parallax-darker">').prependTo(j);return $(window).on("resizeEvent",e),void Scroll.step(b)}i.setDimensions(w.width,g,!1,!0);var t=$(i).data("src"),u=i.getContext("2d"),v=new FakeImage(t);i.hasAttribute("data-crop-position")&&(v.crop=i.getAttribute("data-crop-position").split(" "));var x=new LoaderItem("parallax image");if($(window).one("loadHeavy",function(a){v.fakeLoad(),$(v).onImageReady(function(){x.done()})}),k){var y=14,z=194,A=.25,B=document.createElement("canvas");B.crop=v.crop;var C=B.getContext("2d"),D=document.createElement("canvas"),E=D.getContext("2d");$(v).onImageReady(function(){var a=v.naturalWidth||v.width,b=v.naturalHeight||v.height;B.width=a,B.height=b,D.width=a*A,D.height=b*A,E.drawImage(v,0,0,D.width,D.height),stackBlurCanvasRGB(D,0,0,D.width,D.height,Math.round(A*y)),C.drawImage(D,0,0,a,b)})}$(window).one("pagePrepare",e).on("resizeEvent",e),$.browser.mobile||Scroll.step(f)});var stripesPattern=function(){var a=100,b=2*a,c=createCanvas(b,b),d=c.context;d.style("rgba(255,255,255,0.05)");for(var e=1;4>e;e+=2){d.begin();var f=e*a;d.move(f,0).line(f+a,0).line(f+a-b,b).line(f-b,b).closePath(),d.fill()}return d.createPattern(c,"repeat")}(),parallaxPatternWhite=function(){var a=createCanvas(7,7),b=a.context;return b.style("rgba(255,255,255,0.05)").fR(3,3),b.createPattern(a,"repeat")}(),parallaxPatternDark=function(){var a=createCanvas(7,7),b=a.context;return b.style("rgba(0,0,0,0.15)").fR(3,3),b.createPattern(a,"repeat")}();!function(){function a(){function a(a,b){a=a||0,b=b||0,d.beginPath(),d.moveTo(a+1,b+1),d.lineTo(a+7,b+6.5),d.lineTo(a+1,b+13),d.stroke()}function b(){d.beginPath(),d.arc(20,20,19,0,2*Math.PI),d.stroke(),a(17,13)}var c=createCanvas(40,40,!0),d=c.context;d.strokeStyle=window.COLOR||$(".arrow-prev, .arrow-next").css("color"),d.lineWidth=2,b(),addRules({".arrow-next":"background: url("+c.toDataURL()+") 0 0 / 40px 40px"}),d.clearCanvas(),d.scale(-1,1),d.translate(-40,0),b(),addRules({".arrow-prev":"background: url("+c.toDataURL()+") 0 0 / 40px 40px"})}function b(){d.fR(9,0,-7.5,1).fR(9,0,-1,7.5).begin().move(8,1).line(.5,8.2).stroke()}a(),$(window).on("previewRedraw",a);var c=createCanvas(9,9,!0),d=c.context;d.fillStyle=d.strokeStyle="white",d.lineWidth=1.1,b(),addRules({".photo-enlarge::before":"background: url("+c.toDataURL()+") 0 0 / 9px 9px"}),d.clearCanvas(),d.translate(9,9),d.rotate(Math.PI),b(),addRules({".photo-enlarge::after":"background: url("+c.toDataURL()+") 0 0 / 9px 9px"})}(),drawIcons(),$("section[data-background]").each(function(){var a=this,b=$(this),c=new LoaderItem("background image");$(window).one("loadHeavy",function(d){var e=b.data("background");if(b.hasClass("blog-page")&&(b=$("body > .background")),b.css("background-color",e),""==a.style.backgroundColor){b.css("background-image","url("+e+")");var f=new Image;f.src=e,f.onload=function(){c.done()}}else c.done()})}),$(".separator-diamond").each(function(){$(this).append("<hr><hr><hr>")}),$(".links-footer a, .sidebar-links a").each(function(){$(this).contents().wrap("<span />")}),$(".list-footer article:has(.list-bullet)").addClass("has-bullet"),$(".aside-image").each(function(){function a(){var a=d.parent().width();if(a>b)return d.css({transform:"",marginBottom:""});var e=Math.min(1,a/b),f=-(1-e)*c+20;d.css({transform:"scale("+e+")",marginBottom:f})}var b,c,d=$(this);$(window).on("pagePrepare",function(){b=d.outerWidth(),c=d.outerHeight(),a()}).on("resizeWidth",a)}),$(window).one("handled",function(){$(".sidebar-gallery-block img, .gallery-footer img").centerImages(),$(".ipad-frame, .iphone-frame, .imac-frame").each(function(a){$("img",this).centerImages(this.clientWidth,this.clientHeight)}),$(".video").each(function(a){if(!$(this).closest(".main").length){var b=this,c=new LoaderItem("video");$(window).one("loadHeavy",function(a){var d=getMediaTypeByClass(b),e=new VideoPlayer({container:$(b),type:d,source:$(b).data(),controls:!$(b).hasClass("no-controls"),spreaded:$(b).hasClass("spreaded"),overlay:!0,onload:function(){c.done()}});b.video=e})}})});var $mainBlock=$(".main").each(function(){var a=this;new MainBlock(a)});0!==$mainBlock.length&&$.support.transition?Loader.$loader.css("background","none"):setTimeout(function(){$(window).triggerHandler("loadHeavy")},1e3),PortfolioBlock.prototype={item:{w:384,h:290}},$(".portfolio").each(function(){var a=this;new PortfolioBlock(a)});var Portfolio=function(a,b){function c(){V=!0,G=!0,$(window).triggerHandler("mousemove");var b=e(),c=u.find(".portfolio-info").each(function(a){var c=(a+1)*w.width*A+b;$(this).css("left",c).children().removeClass("post-anim"),a==I&&$(this).children().addClass("pre-anim").filter(".portfolio-close-info").hide()});return a.add(E).add(F).addClass("info-active"),runApart(function(){$.browser.mobile||u.removeClass("hidden");var a=f(c,b);$.support.transition&&D.css("transform","translate("+-a+"px)")}),u.css("transform","translate("+(I+1)*-w.width*A+"px,"+-w.height+"px)"),$.browser.mobile?(H=1,u.css("transition","1s").removeClass("hidden"),runApart(m),void setTimeout(function(){D.hide(),c.eq(I).children().each(function(a){var b=$(this);return b.hasClass("portfolio-close-info")?b.css("display","block"):void setTimeout(function(){b.removeClass("pre-anim")},150*a)})},1010)):void singleAnimation({position:1,duration:1e3,step:function(a){H=-a,M||m()},complete:function(){D.hide(),c.eq(I).children().each(function(a){var b=$(this);if($.support.transition){if(b.hasClass("portfolio-close-info"))return b.css("display","block");setTimeout(function(){b.removeClass("pre-anim")},150*a)}else b.css("opacity",0).removeClass("pre-anim").show().stop().delay(150*a).animate({opacity:1})})}})}function d(){var b=u.find(".portfolio-info");b.eq(I).children().addClass($.support.transition?"post-anim":"").filter(".portfolio-close-info").hide(),$.support.transition||b.eq(I).children().stop().animate({opacity:0},550);var c=f(b);D.css("transform","translate("+-c+"px)").show(),setTimeout(function(){function c(){V=!1,G=!1,a.removeClass("info-active"),u.addClass("hidden"),b.eq(I).children().css("opacity","").filter(".portfolio-close-info").show()}return D.css("transform",""),E.removeClass("info-active"),setTimeout(function(){F.removeClass("info-active")},250),$.browser.mobile?(H=0,u.css("transition","1s"),m(),void setTimeout(c,1e3)):void singleAnimation({position:1,duration:800,ease:"mcsEaseOut",step:function(a){H=1+a,M||m()},complete:c})},600)}function e(){var a=h.width;return w.width<1170&&(a=585),w.width<985&&(a+=w.width-985),w.width<360&&(a=-40),a}function f(a,b){b=b||e();var c=w.width-a[0].offsetWidth-b-40-54;return w.width<=1040&&(c+=62),c}function g(a,b){this.index=a,this.url=b,this.loaded=!1,this.$inner=$("<article />").appendTo(x)}function i(a){a=a||I;var b=a-1,c=a+1;K[a]&&K[a].load(),K[b]&&K[b].load(),K[c]&&K[c].load()}function j(a,b){var c=K[a];void 0!==c&&$.ajax({cache:!0,url:c.url,dataType:"html"}).done(function(a){var d=$(a).filter(".portfolio-item");c.prepare(d,function(){b&&b(c)})}).error(function(){})}function k(a){var b=K[a];b.video&&b.video.stop()}function l(a,b,c,d){return 0>a&&(a/=2),a>O&&(a=O+(a-O)/2),$.browser.mobile&&(b=0),0===b?(M=!1,P.clear(),Q.pos=a,N=P.node.pos=-a,m(),void(c&&c())):(M=!0,void P.animate(a,b,{easing:d,complete:function(){M=!1,c&&c()},step:function(a,b){N=a,Q.pos=-N,m()}}))}function m(){z.clearCanvas();var a=-N/w.width,b=a>>0,c=Math.ceil(a);if($.browser.mobile){x.css("transform3d","translateX("+N+"px)");var d=0>N?.5*(N+O)+h.width:.5*N-h.width;y.css("transform","translateX("+d+"px)")}else if(K.forEach(function(a,d){a.skip&&(a.skip>0?c=-1:b=-1)}),K.forEach(function(a,d){a.skip?a.draw(z,N+(I+a.skip)*w.width):d==b?a.draw(z,N+d*w.width):d==c?b!=c&&a.draw(z,N+d*w.width):a.hide()}),0>a||a>K.length-1){var f=0>a?N:N+O,g=0>a?0:w.width;z.fillStyle=stripesPattern;var i=.47*f;z.translate(i,0),z.fillRect(g-i,0,f,w.height),z.translate(-i,0)}if(G){if(u.css("transform","translate("+(a+1)*-w.width*A+"px,"+w.height*(H-1)+"px)"),$.browser.mobile)return;var i=e()+40;K.forEach(function(a,d){if(d==c||d==b){var e=d*w.width+N,f=u.find(".portfolio-info")[0].offsetWidth;a.drawBlurInfo(z,e,i,f)}})}X&&!$.browser.mobile&&(K.forEach(function(a,d){if(d==c||d==b){var e=d*w.width+N;a.drawBlurBar(z,e,147-Z)}}),z.fillStyle="rgba(255,255,255,"+.3*_+")",z.fillRect(0,0,w.width,w.height+Z-147))}function n(){U.filter(".active").removeClass("active"),U.eq(I).addClass("active")}function o(a){var b=W;W=a,(V||Q.downed)&&(W=!1),b!=W&&p(W)}function p(b){b&&(X=!0),$.support.pointerEvents||v.css("zIndex",X?20:14),a.toggleClass("bar-active",b);var c=b?0:147;return $.browser.mobile?void(0==b&&(X=!1)):(F.css("transition","none"),void Y.animate(c,900,{easing:"ease",dontRound:!0,step:function(a){Z=-a,_=1-Z/147,s.css("transform","translateY("+Z+"px)"),F.css("transform","translateY("+(-147+Z)+"px)"),M||$.browser.mobile||m()},complete:function(){F.css({transition:"",transform:""}),0==b&&(X=!1),$.support.pointerEvents||v.css("zIndex",X?20:14)}}))}var q=this;this.ready=!1,this.$container=a;var r=a.find(".portfolio-items").remove(),s=a.find(".portfolio-bar").addClass("hidden");s.find("img").centerImages();var t=$('<div class="portfolio-viewport" />').appendTo(a).addClass("grab-cursor"),u=$('<div class="portfolio-details hidden" />').appendTo(a),v=$('<canvas class="portfolio-canvas" />').appendTo(t),x=$('<div class="portfolio-stuff" />').appendTo(t);if($.browser.mobile)var y=$('<div class="mobile-stripes" />').appendTo(t);v[0].setDimensions(w.width,w.height,!1,!0);var z=v[0].getContext("2d"),A=1.27,B=8,C=!1,D=$('<i class="icon-cross portfolio-close hidden"></i>').appendTo(a);D.on("click",function(){q.close()});var E=$('<i class="icon-details portfolio-toggle-info hidden"></i>').appendTo(a);E.on("click",c);var F=$('<i class="icon-bar portfolio-toggle-bar hidden"></i>').appendTo(a);F.on("click",function(){o(!X)}),v.on("click",function(a){X&&o(!1)}).exclusiveClick(),u.on("click",".portfolio-close-info",d);var G=!1,H=0;$(window).on("resizeEvent",function(a){if(u.hasClass("hidden"))u.css("transform","").find(".portfolio-info").css("left","");else{var b=e();u.find(".portfolio-info").each(function(a){var c=(a+1)*w.width*A+b;$(this).css("left",c)})}}),drawIcons();var I=b,J=r.children().length,K=[];r.children().each(function(a){var b=new g(a,$(this).data("url"));K.push(b)}),g.prototype.draw=function(a,b){this.$inner.css("transform","translateX("+(b-w.width)+"px)")},g.prototype.drawBlurInfo=g.prototype.drawBlurBar=function(a,b){},g.prototype.hide=function(){this.$inner.css("transform","")},g.prototype.load=function(a){this.loaded||a&&a()},g.prototype.prepare=function(a,b){this.prepare=function(){};var c=this,d=a.find(".portfolio-media").children(),e=this.$info=a.find(".portfolio-info");0==e.children(":not(.portfolio-close-info)").length&&e.append('<div class="letter">N</div><h4>No caption.</h4>'),$.browser.mobile&&c.$inner.css("left",100*c.index+"%");var f=this.type=d.prop("src")?"image":"video";if("image"==f){var g=this.image=new FakeImage(d.prop("src")),h=createCanvas();$(g).on("load",function(a){c.loaded=!0,c.preloader.stop(),h.width=this.width/B,h.height=this.height/B,h.context.drawImage(this,0,0,h.width,h.height),stackBlurCanvasRGB(h,0,0,h.width,h.height,3),m()}),$.browser.mobile&&$(g).appendTo(this.$inner).centerImages();var i=d[0];i.hasAttribute("data-crop-position")&&(g.crop=h.crop=i.getAttribute("data-crop-position").split(" ")),this.preloader=new Preloader(this.$inner),this.draw=function(a,b){!$.browser.mobile&&g.complete&&""!=g.src?a.drawFilledImage(g,b,0,w.width,w.height):c.$inner.css("transform","translateX("+(b-w.width)+"px)")},this.drawBlurInfo=function(a,b,c,d){""!=g.src&&g.complete&&a.drawFilledImage(h,c+b*A,0,w.width,w.height,{x:c+b*(A-1),y:0,w:d,h:w.height*H})},this.drawBlurBar=function(a,b,c){""!=g.src&&g.complete&&a.drawFilledImage(h,b,w.height-c,w.width,w.height,{x:0,y:w.height-c,w:w.width,h:c})},this.load=function(a){c.loaded||(this.preloader.start(),a&&$(g).on("load",a),g.fakeLoad())},b&&b()}else{var j=a.find(".video").addClass("spread only-play").appendTo(this.$inner),k=this.video=new VideoPlayer({container:j,type:getMediaTypeByClass(j[0]),source:j.data(),controls:!0,overlay:!0,onload:function(){b&&b()}}),h=createCanvas(),l=k.overlay;$(l).onImageReady(function(){l.checkTaint(),l.tainted===!1&&(h.width=l.width/B,h.height=l.height/B,h.context.drawImage(l,0,0,h.width,h.height),stackBlurCanvasRGB(h,0,0,h.width,h.height,3))}),this.load=function(a){c.loaded||($(l).onImageReady(function(){c.loaded||(c.loaded=!0,a&&a())}),setTimeout(function(){c.loaded||(c.loaded=!0,a&&a())},3e3))},this.drawBlurInfo=function(a,b,c,d){"idle"==k.state&&l.tainted===!1&&a.drawFilledImage(h,c+b*A,0,w.width,w.height,{x:c+b*(A-1),y:0,w:d,h:w.height*H})},this.drawBlurBar=function(a,b,c){"idle"==k.state&&l.tainted===!1&&a.drawFilledImage(h,b,w.height-c,w.width,w.height,{x:0,y:w.height-c,w:w.width,h:c})}}};var L=0;K.forEach(function(a,b){getTime();j(b,function(){++L==K.length&&(K.forEach(function(a,b){a.$info.appendTo(u)}),drawIcons(),K[I].load(function(){m(),q.ready(),setTimeout(function(){i(),V=!1,D.removeClass("hidden"),setTimeout(function(){E.removeClass("hidden")},350),setTimeout(function(){F.removeClass("hidden")},650)},1e3)}))})});var M=!1,N=-w.width*I,O=(J-1)*w.width,P=this.anim=new MoveAnimation({pos:-w.width*I}),Q=new TouchMove({elem:t,pos:w.width*I,namespace:"portfolio",alwaysPrevent:!0,ondown:function(b,c){return C?!1:(a.addClass("drag"),void($.browser.mobile&&x.add(y).add(u).css("transition","")))},onmove:function(a,b,c){l(a,200)},onup:function(b){if(!C){a.removeClass("drag");var c=I,d=Math.round(-b/w.width);d=Math.max(0,Math.min(K.length-1,d)),$.browser.mobile&&x.add(y).add(u).css("transition","1100ms"),l(d*w.width,1100,function(){c!=d&&k(c)}),I!=d&&(i(I=d),n())}}});$(window).on("resizeEvent",function(a){$.browser.mobile&&x.find("article img").centerImages(),v[0].setDimensions(w.width,w.height,!1,!0),M||(P.node.pos=N=-I*w.width,Q.pos=-N,O=(J-1)*w.width,m())});var R=(createCanvas(w.width/B,w.height/B),$('<div class="movable-part" />').append(s.children()).appendTo(s)),S=new MoveAnimation(R[0],!0),T=R[0].scrollWidth-w.width+10;10>=T&&(T=15),$(window).on("resizeEvent",function(a){T=R[0].scrollWidth-w.width+10,10>=T&&(T=15)});var U=s.find("article").on("click",function(a){var b=I,c=$(this).index();if(!C&&c!=b){C=!0;var d=c*w.width,e=K[I],f=w.width;N=I>c?-d-w.width:-d+w.width,P.node.pos=N,e.skip=I>c?1:-1,$.browser.mobile&&x.css("transition","1100ms"),l(d,1100,function(){k(b),e.skip=!1,C=!1,f!=w.width&&l(I*w.width,1)},"ease"),I=c,i(),n()}});$(window).on("keyup",function(a){G||(37==a.keyCode&&I>0&&U.eq(I-1).click(),39==a.keyCode&&I<K.length&&U.eq(I+1).click())}),n();var V=!0,W=!1,X=!1;$(window).on("mousemove.portfoliobar",function(a){if(!$.browser.mobile&&W){var b=(a.pageX-10)/(w.width-20);b=.02>b?0:b>.98?1:b,S.animate(b*T,1300)}});var Y=new MoveAnimation({pos:-147}),Z=0,_=0};Portfolio.prototype.close=function(){this.destroy()},Portfolio.prototype.destroy=function(){$(window).off("mousemove.portfoliobar"),this.anim.clear(),this.$container.remove()},$(".devices-block").each(function(a){new DevicesBlock(this)}),$(".persons-block").each(function(a){new PersonsBlock(this)}),$(".posts-block").each(function(a){new BlogPostsBlock(this)}),$(".quotes-rotator").each(function(a){function b(a){a!=h&&($.support.transition?e.css("opacity",0):e.stop().animate({opacity:0},480),setTimeout(function(){function b(){$.support.transition?e.eq(a).css("opacity",1):e.eq(a).stop().animate({opacity:1},480)}e.eq(h).hide(),e.eq(a).show(),h=a;var c=e.eq(a).height();c==j?b():(j=c,$.support.transition?d.css("height",j):d.stop().animate({height:j},480),setTimeout(b,500))},500))}var c=$(this),d=$(".quotes",this),e=$("article",d),f=$(".togglers",this),g=$(".arrow-prev, .arrow-next",this),h=0,i=e.length-1,j=0;e.hide().first().show(),setTimeout(function(){j=e.first().height(),d.css("height",j)},50),$(window).on("fontsUpdated",function(a){j=e.eq(h).height(),d.css("height",j)});var k=new Togglers({elem:f,amount:e.length,handler:function(a){b(a)}});if($.browser.mobile||c.hasClass("quotes-alternative")){e.addClass("grab-cursor");new TouchMove({elem:c,namespace:"posts",onup:function(a,b){Math.abs(b)<20||g.eq(b>0?0:1).triggerHandler("click")}})}g.on("click",function(a){var c=g.index(this)?h+1:h-1;0>c&&(c=i),c>i&&(c=0),b(c),k.setActive(c)}),$(window).on("resizeWidth",function(a){var b=e[0].scrollHeight;d.css("height",b)}),0===i&&g.hide(),g.each(function(){function a(a){e.push({start:getTime(),radius:a}),f&&b()}function b(){d.clearCanvas(),f=!0,e.forEach(function(a,b){f=!1;var c=(getTime()-a.start)/2200;c=Math.min(1,Math.max(0,c));var g=-c*(c-2);g=Math.min(1,Math.max(0,g)),d.lineWidth=.2+g*(a.radius/20);var h=Math.max(0,Math.min(1,.2*(1-g)));d.strokeStyle="rgba(255,255,255,"+h+")",d.beginPath(),d.arc(50,50,20+a.radius*g*.6,0,2*Math.PI),d.stroke(),c>=1&&delete e[b]}),0==f&&requestAnimationFrame(b)}var c=$("<canvas />").attr({width:100,height:100}).appendTo(this),d=c[0].getContext("2d"),e=[],f=!0;$(this).on("click",function(b){a(50),setTimeout(a,125,30)}).on("mouseover",function(b){a(30)})})}),ScrollableLogo.prototype.options={gridWidth:1170,slowerIndex:.35,paddingHalf:30},$(".client-block").each(function(){function a(a){clearTimeout(f),f=setTimeout(b,a)}function b(){if(a(3e3),!e.hover&&!e.hold){var b=getTime()-e.releaseTime;return 3e3>b?a(3e3-b):void c()}}function c(){var a=e.positions,b=e.active;if(!e.static){if(g&&!a[e.active+1]&&(g=!1),g||a[e.active-1]||(g=!0),g){var d=a[e.active].right;e.active++}else d=a[e.active].left,e.active--;return b==e.active?c():void e.animateToActive(1500)}}var d=this,e=new ScrollableLogo(d);if(e.static)return void $(d).addClass("static-client-logos");var f=null,g=!0;$(window).on("resizeResponsive",function(b){e.calculatePositions(),null!==f&&(e.touch.pos=e.anim.node.pos=0,g=!0,a(2e3))});var h=new ElementVisibility(d);h.onshow(function(){a(2e3)}),h.onhide(function(){clearTimeout(f)})}),StatsBlock.prototype={itemWidth:241,containerWidth:1040},$(".stats-block").each(function(){function a(a,c){var d=a.offsetWidth/2+$(a).offset().left,e=a.offsetHeight/2+(a.offsetParent.offsetTop+a.offsetTop);j.push({start:getTime(),x:d,y:e,radius:c}),k&&b()}function b(){i.clearCanvas(),k=!0,j.forEach(function(a,b){k=!1;var c=(getTime()-a.start)/2200;c=Math.min(1,Math.max(0,c));var d=-c*(c-2);d=Math.min(1,Math.max(0,d)),i.lineWidth=1+d*(a.radius/6);var e=Math.max(0,Math.min(1,.15*(1-d))),f=95+a.radius*d*.6,g=i.lineWidth/2,h=i.createRadialGradient(a.x,a.y,f-g,a.x,a.y,f+g);h.addColorStop(0,"rgba(255,255,255,0)"),h.addColorStop(.5,"rgba(255,255,255,"+e+")"),h.addColorStop(1,"rgba(255,255,255,"+e/2+")"),i.strokeStyle=h,i.beginPath(),i.arc(a.x,a.y,95+a.radius*d*.6,0,2*Math.PI),i.stroke(),c>=1&&delete j[b]}),0==k&&requestAnimationFrame(b)}var c=this,d=new StatsBlock(this),e=new ElementVisibility(c);e.onshow(d.fillInitial);var f=$(this).closest("section"),g=f.height(),h=$('<canvas class="hover-bubbles" />').attr({width:w.width,height:g}).appendTo(f);$(window).on("resizeWidth",function(a){h[0].width=w.width});var i=h[0].getContext("2d"),j=[],k=!0,l=null,m=null;if($(".stats-circle",c).on("mouseover",function(b){$(this).width()/2+$(this).offset().left,$(this).height()/2+(this.offsetParent.offsetTop+this.offsetTop);a(this,50),l=setTimeout(a,125,this,30),m=setTimeout(a,400,this,15)}).on("mouseleave",function(a){clearTimeout(l),clearTimeout(m)}),!d.static){var n=$(c).closest(".parallax-block").addClass("grab-cursor");0==n.length&&(n=$(c).addClass("grab-cursor"));var o=getOffsetTop(n[0]),p=new TouchBubbles(n[0]),q=new TouchMove({elem:n,namespace:"stats",ondown:function(a,b){d.ready&&($.browser.mobile?d.$items.css("transition",""):(o=getOffsetTop(n[0]),p.show(b.pageX,b.clientY-o+Scroll.position)))},onmove:function(a,b,c){d.ready&&(d.animateElements(a,200),$.browser.mobile||p.position(c.pageX,c.clientY-o+Scroll.position))},onup:function(a,b,c){return d.ready?($.browser.mobile?d.$items.css("transition",".7s"):p.hide(),d.animateToClosest(a)):0}});$(window).on("resizeResponsive resizeFix",function(){d.setUpInitial(),q.pos=0})}}),$(".skills-block").each(function(){new SkillsBlock(this)}),$(".contacts-form").each(function(){var a=this,b=(new ContactForm(a),$(this).closest("section"));$("textarea",this).each(function(){var a=this,c=a.clientHeight-12,d=500,e=$('<div class="resize-thumb"><hr></div>').insertAfter(a);e.on("mousedown",function(e){var f=e.pageY,g=Scroll.position,h=a.clientHeight;$(window).on("mousemove.textarea",function(e){var i=e.pageY-f+(Scroll.position-g),j=Math.max(c,Math.min(d,h+1+i));a.style.height=j+"px",b.trigger("changedHeight"),e.preventDefault()}).one("mouseup",function(a){Scroll.resize(),$(window).off("mousemove.textarea")}),e.preventDefault()})})}),$(".contacts-block .contacts-form").each(function(){var a=$(this),b=a.closest(".contacts-block"),c=$('<div class="contacts-form-opener"><i class="fa fa-paper-plane"></i></div>').appendTo(b),d=$('<div class="contacts-form-close"><i class="icon-cross"></i></div>').appendTo(b);c.add(d).on("click",function(){a.css("transition",".8s").toggleClass("hidden"),b.toggleClass("opened",!a.hasClass("hidden"))}),drawIcons()}),$(".custom-form").each(function(a){$('<input type="hidden" value="'+$(this).data("subject")+'" name="subject">').appendTo(this);var b=$("input, textarea",this);$(".clear",this).on("click",function(a){$(this).closest("form").find("input, textarea").val("")}),$(".send",this).on("click",function(a){var c=!0,d=$(this).closest("form"),e=d.find(".custom-form-status");d.find("input, textarea").each(function(a){if(this.required&&""==$.trim(this.value)){var b=$(this).data("hint")||"Please, fill the required field";return e.css("opacity")>.2?(e.removeClass("visible"),setTimeout(function(){e.text(b).addClass("visible")},600)):e.text(b).addClass("visible"),$(this).addClass("pulse").focus().one("blur",function(a){$(this).removeClass("pulse"),e.removeClass("visible")}),c=!1,!1}}),c&&$.ajax({url:"contact.php",method:"POST",data:b.serialize(),complete:function(a){var b=a.responseText;e.css("opacity")>.2?(e.removeClass("visible"),setTimeout(function(){e.text(b).addClass("visible")},600)):e.text(b).addClass("visible")}})})}),$(document).ready(function(){GoogleMaps.prototype={miles:!1,mapOptions:{mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,zoom:16,zoomControl:!1,panControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,scrollwheel:!1,styles:mapsScheme.light},markerOptions:{icon:function(){return new google.maps.MarkerImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAFVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAASAQCkAAAABnRSTlMAAVyAq+Y3sqfUAAAAMElEQVQI102NMRIAMBABcfj/k9Mkk1NtYQEoJxYBTtu2Q6g3gh8aeZiNq7C0NfYvDmT6AdURXIZGAAAAAElFTkSuQmCC",null,null,new google.maps.Point(5,5),new google.maps.Size(10,10))}(),flat:!0,optimized:!1,title:"",visible:!0}},$(".google-maps").each(function(){var a=google.maps,b=this,c=$(this).closest(".content-block").length;c&&$(this).wrap('<div class="content-maps" />');var d=new LoaderItem("google maps");$(window).one("loadHeavy",function(c){var e=new GoogleMaps(b);$(b).closest("section").on("changedHeight",function(){a.event.trigger(e.Map,"resize")}),a.event.addListenerOnce(e.Map,"tilesloaded",function(){d.done()})})})}),$(".fold-list").each(function(){function a(a){var b=this,d=$(a),e=$(a).find(".text");this.active=!1,this.toggleItem=function(a){b.active=!d.hasClass("active"),d.css("height",d.height()),b.active&&e.show(),runApart(function(){var f=e.outerHeight(!0),g=b.active?f+d.children("h5").outerHeight():d.height()-f;d.toggleClass("active",b.active).stop().animate({height:g},{easing:"bez_0p25,0p1,0p25,1",duration:413,complete:function(){d.css("height",""),0==b.active&&e.css("display","none")}}),e.css({display:"block",opacity:b.active?1:"",transform:b.active?$.browser.webkit?"translateZ(0)":"none":""}).transitEnd(function(){}),void 0!==a&&c.forEach(function(a){a.active&&b!=a&&a.toggleItem()})})},d.on("click",this.toggleItem).data("item",this),d.hasClass("active")&&(d.removeClass("active"),this.toggleItem())}var b=$(this),c=[];b.children().each(function(){var b=new a(this);c.push(b)})}),$(".photo-enlarge").each(function(a){$("img",this).centerImages(),$('<div class="darker" />').appendTo(this)}),$(".photo-link").each(function(a){function b(a,b,d,e){k.animate(a,b||700,{easing:d,complete:e,step:function(a){c()}})}function c(){var a=-k.node.pos;i.drawFilledImage(j,0,0,f,g),i.save(),i.begin().arc(f/2+.5,g/2+.5,a,0,2*Math.PI,!0),i.clip(),i.drawFilledImage(d,0,0,f,g),i.style("rgba(255,255,255,0.1)").fill(),i.restore();var b=a/12.8*.35;i.style("rgba(0,0,0,"+b+")").fR(0,0,f,g)}var d,e=this,f=this.offsetWidth,g=this.offsetHeight,h=createCanvas(f,g,!0),i=h.context,j=this.querySelector("img"),k=new MoveAnimation({pos:0});$(j).onImageReady(function(){d=createCanvas(j.width/2,j.height/2);try{d.context.drawImage(j,0,0,j.width/2,j.height/2),stackBlurCanvasRGB(d,0,0,d.width,d.height,2)}catch(a){}e.appendChild(h),e.removeChild(j),c()}),$(this).on("mouseenter mouseleave",function(a){var c="mouseenter"==a.type||"mouseover"==a.type,d=c?12.8:0;b(d,500)})}),$('[class*="animation-"]').each(function(){new ScrollAnimation(this)}),$(window).trigger("handled");var pageIsBlog=$(document.body).hasClass("blog"),blogHeaderHeight;$(window).one("pagePrepare",function(a){pageIsBlog&&(blogHeaderHeight=$(".blog-header").height()||0,$background.css("transform3d","translateY(-"+blogHeaderHeight+"px)"))}),$(page).on("scrolling",function(a,b){if(pageIsBlog&&useScrollTop&&!useScrollTop){"object"==typeof a&&(a=b);var c=-a-blogHeaderHeight;$background.css("transform3d","translateY("+c+"px)")}}),function(){var a=!1,b=$(".blog-sidebar");$(document).on("click",".blog-sidebar-toggler",function(){a=!a,b.css("height",a?b[0].scrollHeight:"")}),$(".blog-header-bar .content").append('<div class="blog-sidebar-toggler" />')}(),setTimeout(blogTagsUpdate,0),$(window).on("resizeResponsive",blogTagsUpdate),$(".search-field input").on("focus blur",function(a){$(this).siblings(".search-action").toggleClass("focused","focus"==a.type||"focusin"==a.type)}),$(".post-preview").each(function(a){function b(a){k=d.width(),l=j*k;var b=i*k;m.animate(b,1,{disableSubpixelsOnIdle:!0}),r.pos=b;var c=$(".blog-sidebar");if(w.width>800)c.css({paddingLeft:"",width:""});else{var e=202,g=(.9*w.width-e)/2;c.css({paddingLeft:g,width:e+g})}f.find("img").centerImages()}var c=this,d=$(c),e=$('<div class="preview-items-container" />').appendTo(c),f=$("article",c).appendTo(e),g=$('<div class="togglers" />').appendTo(c),h=$('<div class="darker" />').css("opacity",0).appendTo(c);Scroll.step(function(a){if(!$.browser.mobile){var b=d.getOffsetTop(),e=c.offsetHeight;if(!(a>b+e||a+w.height<b))if(a>b){var f=(a-b)/e;h.css("opacity",f)}else if(b+e>a+w.height){var f=(b+e-a-w.height)/e;h.css("opacity",f)}}});var i=0,j=f.length-1,k=d.width(),l=j*k,m=new MoveAnimation(e[0],!0),n=new Togglers({elem:g,amount:f.length,absolute:!0,handler:function(a){var b=a*k;r.pos=b,m.animate(b,800,{disableSubpixelsOnIdle:!0}),i=a}});0===j&&e.addClass("one-element");var o,p,q=!1,r=new TouchMove({elem:e,namespace:"postpreview",ondown:function(a,b){q=!0,o=getTime(),p=b.target},onmove:function(a,b,c){0>a&&(a/=2),a>l&&(a=l+(a-l)/2),m.animate(a,200)},onup:function(a,b,c){if(q=!1,getTime()-o<350&&Math.abs(b)<10)return $(p).click();a=Math.max(0,Math.min(l,-a));var d=Math.round(a/k);return i=d,a=d*k,m.animate(a,800,{disableSubpixelsOnIdle:!0}),n.setActive(d),a}});$(window).on("resizeResponsive",b),b()}),function(){$(".clear").on("click",function(a){$(this).closest("form").find("input, textarea").val("")}),$(".send").on("click",function(a){var b=$(this).closest("form"),c=b.find(".reply-status");b.find("input, textarea").each(function(a){if((this.required||this.hasAttribute("required")&&"false"!=this.getAttribute("required"))&&""==$.trim($(this).val())){var b=$(this).data("hint")||"Please, fill the required field";return c.css("opacity")>.2?(c.removeClass("visible"),setTimeout(function(){c.text(b).addClass("visible")},600)):c.text(b).addClass("visible"),$(this).addClass("pulse").focus().one("blur",function(a){$(this).removeClass("pulse"),c.removeClass("visible")}),!1}})});var a=new MoveAnimation({pos:17}),b=!1;$(".reply-button").on("click",function(c){function d(){g.length?e.insertBefore(g):e.appendTo(f),e.css("marginTop",-393),setTimeout(function(){a.node.pos=-393,a.animate(-17,801,{easing:"ease",step:function(a){e.css("marginTop",a)},complete:function(){e.removeClass("hidden"),e.find("input, textarea").first().focus(),Scroll.resize()}}),Scroll.to(f.getOffsetTop()-10,800,"ease")},25),b=!1}var e=$(".reply-form"),f=$(this).closest(".comment"),g=f.find(".comment-replies");if(!e.closest(".comment").is(f)&&!b){b=!0;var h=e[0].className.match(/animation-[\w-]*/);e.removeClass(h?h[0]:"").css("transition","").addClass("hidden");var i=e[0].getBoundingClientRect();i.top>w.height?setTimeout(d,0):e.transitEnd(function(){a.animate(393,601,{easing:"ease",step:function(a){e.css("marginTop",a)},complete:d});var b=Scroll.available-393;Scroll.position>b&&Scroll.to(b,601,"ease")})}})}(),$(".sidebar-skills").each(function(a){var b=$(this),c=b.children("article");c.each(function(a){var b=parseFloat($(this).data("percent"),10);$(this).append('<div class="skill-stripe"><hr style="width:'+b+'%;"></div>')})}),$(".sidebar-slider").each(function(a){function b(a){n!=a&&(m.eq(n).find("p").stop().animate({width:0},500),setTimeout(function(){m.eq(a).find("p").stop().each(function(){var a=this.scrollWidth;$(this).animate({width:a},500)}),n=a},500))}var c=$(this),d=c.children("article"),e=d.wrapAll('<div class="movable" />').parent().addClass("grab-cursor").css("height","100%"),f=$('<div class="togglers" />').appendTo(this),g=d.length-1,h=d.outerWidth(!0),i=g*h,j=new MoveAnimation(e[0],!0),k=new Togglers({elem:f,style:"small",amount:d.length,handler:function(a){var c=a*h;o.pos=c,j.animate(c,800,{disableSubpixelsOnIdle:!0}),b(a)}}),l=$('<div class="captions-container" />').appendTo(this);d.each(function(a){$('<div class="slide-caption" />').append($(this).children("p")).appendTo(l)});var m=l.children();l.find("p").each(function(){$(this).contents().wrapAll("<span />")});var n=0,o=new TouchMove({elem:e,namespace:"widgetslider",onmove:function(a,b,c){0>a&&(a/=2),a>i&&(a=i+(a-i)/2),j.animate(a,200)},onup:function(a,c,d){a=Math.max(0,Math.min(i,-a));var e=Math.round(a/h);return a=e*h,j.animate(a,800,{disableSubpixelsOnIdle:!0}),k.setActive(e),b(e),a}})}),$(".sidebar-gallery").each(function(a){var b=this;$container=$(b),$elements=$container.children("article"),$wrapper=$elements.wrapAll('<div class="movable" />').parent().addClass("grab-cursor"),$togglersContainer=$('<div class="togglers" />').appendTo(this);var c,d,e=$elements.length-1,f=$elements.outerWidth(!0),g=e*f,h=new MoveAnimation($wrapper[0],!0),i=new Togglers({elem:$togglersContainer,style:"small",amount:$elements.length,handler:function(a){var b=a*f;k.pos=b,h.animate(b,800,{disableSubpixelsOnIdle:!0})}}),j=!1,k=new TouchMove({elem:$wrapper,namespace:"widgetgallery",ondown:function(a,b){j=!0,c=getTime(),d=b.target},onmove:function(a,b,c){0>a&&(a/=2),a>g&&(a=g+(a-g)/2),h.animate(a,200)},onup:function(a,b,e){if(j=!1,getTime()-c<350&&Math.abs(b)<10)return $(d).click();
a=Math.max(0,Math.min(g,-a));var k=Math.round(a/f);return a=k*f,h.animate(a,800,{disableSubpixelsOnIdle:!0}),i.setActive(k),a}})});